<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Trang T. Le" />
  <meta name="author" content="Daniel S. Himmelstein" />
  <meta name="author" content="Ariel A. Hippen" />
  <meta name="author" content="Matthew R. Gazzara" />
  <meta name="author" content="Casey S. Greene" />
  <meta name="dcterms.date" content="2021-08-05" />
  <meta name="keywords" content="computational biology, iscb, disparities" />
  <title>Analysis of scientific society-awarded honors reveals disparities</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
    }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <!--
  Manubot generated metadata rendered from header-includes-template.html.
  Suggest improvements at https://github.com/manubot/manubot/blob/main/manubot/process/header-includes-template.html
  -->
  <meta name="dc.format" content="text/html" />
  <meta name="dc.title" content="Analysis of scientific society-awarded honors reveals disparities" />
  <meta name="citation_title" content="Analysis of scientific society-awarded honors reveals disparities" />
  <meta property="og:title" content="Analysis of scientific society-awarded honors reveals disparities" />
  <meta property="twitter:title" content="Analysis of scientific society-awarded honors reveals disparities" />
  <meta name="dc.date" content="2021-08-05" />
  <meta name="citation_publication_date" content="2021-08-05" />
  <meta name="dc.language" content="en-US" />
  <meta name="citation_language" content="en-US" />
  <meta name="dc.relation.ispartof" content="Manubot" />
  <meta name="dc.publisher" content="Manubot" />
  <meta name="citation_journal_title" content="Manubot" />
  <meta name="citation_technical_report_institution" content="Manubot" />
  <meta name="citation_author" content="Trang T. Le" />
  <meta name="citation_author_institution" content="Department of Biostatistics, Epidemiology and Informatics, Institute for Biomedical Informatics, University of Pennsylvania" />
  <meta name="citation_author_orcid" content="0000-0003-3737-6565" />
  <meta name="twitter:creator" content="@trang1618" />
  <meta name="citation_author" content="Daniel S. Himmelstein" />
  <meta name="citation_author_institution" content="Department of Systems Pharmacology and Translational Therapeutics, Perelman School of Medicine, University of Pennsylvania" />
  <meta name="citation_author_orcid" content="0000-0002-3012-7446" />
  <meta name="twitter:creator" content="@dhimmel" />
  <meta name="citation_author" content="Ariel A. Hippen" />
  <meta name="citation_author_institution" content="Department of Systems Pharmacology and Translational Therapeutics, Perelman School of Medicine, University of Pennsylvania" />
  <meta name="citation_author_orcid" content="0000-0001-9336-6543" />
  <meta name="twitter:creator" content="@ariel_hippen" />
  <meta name="citation_author" content="Matthew R. Gazzara" />
  <meta name="citation_author_institution" content="Department of Genetics, Perelman School of Medicine, University of Pennsylvania" />
  <meta name="citation_author_orcid" content="0000-0001-7710-4551" />
  <meta name="twitter:creator" content="@MR_Gazzara" />
  <meta name="citation_author" content="Casey S. Greene" />
  <meta name="citation_author_institution" content="Department of Systems Pharmacology and Translational Therapeutics, Perelman School of Medicine, University of Pennsylvania" />
  <meta name="citation_author_institution" content="Childhood Cancer Data Lab, Alex&#39;s Lemonade Stand Foundation" />
  <meta name="citation_author_orcid" content="0000-0001-8713-9213" />
  <meta name="twitter:creator" content="@greenescientist" />
  <link rel="canonical" href="https://greenelab.github.io/iscb-diversity-manuscript/" />
  <meta property="og:url" content="https://greenelab.github.io/iscb-diversity-manuscript/" />
  <meta property="twitter:url" content="https://greenelab.github.io/iscb-diversity-manuscript/" />
  <meta name="citation_fulltext_html_url" content="https://greenelab.github.io/iscb-diversity-manuscript/" />
  <meta name="citation_pdf_url" content="https://greenelab.github.io/iscb-diversity-manuscript/manuscript.pdf" />
  <link rel="alternate" type="application/pdf" href="https://greenelab.github.io/iscb-diversity-manuscript/manuscript.pdf" />
  <link rel="alternate" type="text/html" href="https://greenelab.github.io/iscb-diversity-manuscript/v/45c6d5b57774a209853e24661bf82c5d189ddc8e/" />
  <meta name="manubot_html_url_versioned" content="https://greenelab.github.io/iscb-diversity-manuscript/v/45c6d5b57774a209853e24661bf82c5d189ddc8e/" />
  <meta name="manubot_pdf_url_versioned" content="https://greenelab.github.io/iscb-diversity-manuscript/v/45c6d5b57774a209853e24661bf82c5d189ddc8e/manuscript.pdf" />
  <meta property="og:type" content="article" />
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="og:image" content="https://github.com/greenelab/iscb-diversity-manuscript/raw/45c6d5b57774a209853e24661bf82c5d189ddc8e/build/assets/thumbnail.png" />
  <meta property="twitter:image" content="https://github.com/greenelab/iscb-diversity-manuscript/raw/45c6d5b57774a209853e24661bf82c5d189ddc8e/build/assets/thumbnail.png" />
  <link rel="icon" type="image/png" sizes="192x192" href="https://manubot.org/favicon-192x192.png" />
  <link rel="mask-icon" href="https://manubot.org/safari-pinned-tab.svg" color="#ad1457" />
  <meta name="theme-color" content="#ad1457" />
  <!-- end Manubot generated metadata -->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Analysis of scientific society-awarded honors reveals disparities</h1>
</header>
<p><em>A DOI-citable version of this manuscript is available at <a href="https://doi.org/10.1101/2020.04.14.927251" class="uri">https://doi.org/10.1101/2020.04.14.927251</a></em>.</p>
<p><small><em>
This manuscript
(<a href="https://greenelab.github.io/iscb-diversity-manuscript/v/45c6d5b57774a209853e24661bf82c5d189ddc8e/">permalink</a>)
was automatically generated
from <a href="https://github.com/greenelab/iscb-diversity-manuscript/tree/45c6d5b57774a209853e24661bf82c5d189ddc8e">greenelab/iscb-diversity-manuscript@45c6d5b</a>
on August 5, 2021.
</em></small></p>
<!-- include the Font Awesome library, per: https://fontawesome.com/start -->
<p><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"></p>
<h2 id="authors">Authors</h2>
<ul>
<li><p><strong>Trang T. Le</strong><br>
<img src="images/orcid.svg" class="inline_icon" alt="ORCID icon" />
<a href="https://orcid.org/0000-0003-3737-6565">0000-0003-3737-6565</a>
· <img src="images/github.svg" class="inline_icon" alt="GitHub icon" />
<a href="https://github.com/trang1618">trang1618</a>
· <img src="images/twitter.svg" class="inline_icon" alt="Twitter icon" />
<a href="https://twitter.com/trang1618">trang1618</a><br>
<small>
Department of Biostatistics, Epidemiology and Informatics, Institute for Biomedical Informatics, University of Pennsylvania
</small></p></li>
<li><p><strong>Daniel S. Himmelstein</strong><br>
<img src="images/orcid.svg" class="inline_icon" alt="ORCID icon" />
<a href="https://orcid.org/0000-0002-3012-7446">0000-0002-3012-7446</a>
· <img src="images/github.svg" class="inline_icon" alt="GitHub icon" />
<a href="https://github.com/dhimmel">dhimmel</a>
· <img src="images/twitter.svg" class="inline_icon" alt="Twitter icon" />
<a href="https://twitter.com/dhimmel">dhimmel</a><br>
<small>
Department of Systems Pharmacology and Translational Therapeutics, Perelman School of Medicine, University of Pennsylvania
· Funded by the Gordon and Betty Moore Foundation (<a href="https://www.moore.org/grant-detail?grantId=GBMF4552">GBMF4552</a>)
</small></p></li>
<li><p><strong>Ariel A. Hippen</strong><br>
<img src="images/orcid.svg" class="inline_icon" alt="ORCID icon" />
<a href="https://orcid.org/0000-0001-9336-6543">0000-0001-9336-6543</a>
· <img src="images/github.svg" class="inline_icon" alt="GitHub icon" />
<a href="https://github.com/arielah">arielah</a>
· <img src="images/twitter.svg" class="inline_icon" alt="Twitter icon" />
<a href="https://twitter.com/ariel_hippen">ariel_hippen</a><br>
<small>
Department of Systems Pharmacology and Translational Therapeutics, Perelman School of Medicine, University of Pennsylvania
</small></p></li>
<li><p><strong>Matthew R. Gazzara</strong><br>
<img src="images/orcid.svg" class="inline_icon" alt="ORCID icon" />
<a href="https://orcid.org/0000-0001-7710-4551">0000-0001-7710-4551</a>
· <img src="images/github.svg" class="inline_icon" alt="GitHub icon" />
<a href="https://github.com/mrgazzara">mrgazzara</a>
· <img src="images/twitter.svg" class="inline_icon" alt="Twitter icon" />
<a href="https://twitter.com/MR_Gazzara">MR_Gazzara</a><br>
<small>
Department of Genetics, Perelman School of Medicine, University of Pennsylvania
</small></p></li>
<li><p><strong>Casey S. Greene</strong><br>
<img src="images/orcid.svg" class="inline_icon" alt="ORCID icon" />
<a href="https://orcid.org/0000-0001-8713-9213">0000-0001-8713-9213</a>
· <img src="images/github.svg" class="inline_icon" alt="GitHub icon" />
<a href="https://github.com/cgreene">cgreene</a>
· <img src="images/twitter.svg" class="inline_icon" alt="Twitter icon" />
<a href="https://twitter.com/greenescientist">greenescientist</a><br>
<small>
Department of Systems Pharmacology and Translational Therapeutics, Perelman School of Medicine, University of Pennsylvania; Childhood Cancer Data Lab, Alex’s Lemonade Stand Foundation
· Funded by the Gordon and Betty Moore Foundation (<a href="https://www.moore.org/grant-detail?grantId=GBMF4552">GBMF4552</a>)
</small></p></li>
</ul>
<h2 id="highlights">Highlights</h2>
<!-- 3–4 bullet points of no more than 85 characters in length, including spaces,  -->
<ul>
<li>proportion of women honorees was similar to that of the field</li>
<li>scientists of East Asian origin have been underrepresented among honorees</li>
<li>disparities arise partly, but not exclusively, from geography</li>
<li>honorees with an affiliation in the US were overrepresented by a factor of 2.0</li>
</ul>
<h2 id="summary">Summary</h2>
<p>Delivering a keynote talk at a conference organized by a scientific society, or being named as a fellow by such a society, indicates that a scientist is held in high regard by their colleagues.
To explore if the distribution of such indicators of esteem in the field of bioinformatics reflects the composition of this field,
we compared the gender, name-origin and country of affiliation of 412 honorees from the <em>International Society for Computational Biology</em> (75 fellows and 337 keynote speakers) with over 170,000 last authorships on computational biology papers between 1993 and 2019.
The proportion of honors bestowed on women was similar to that of the field’s overall last authorship rate.
However, names of East Asian origin have been persistently underrepresented among honorees.
Moreover, there were roughly twice as many honors bestowed on scientists with an affiliation in the United States as expected based on literature authorship.
<!-- almost three quarters of this excess was accounted for by a deficit of 89 honorees from China, India, France and Italy.
We found similar name origin disparities in an analysis of US-affiliated scientists as in our international comparison suggesting that disparities arise partly, but not exclusively, from geography. --></p>
<p>A record of this paper’s Transparent Peer Review process is included in the Supplemental Information.
<!-- Short abstract
Delivering a keynote talk at a conference or being named as a fellow by a scientific society indicates that a scientist is held in high regard by their colleagues.
To explore if the distribution of such indicators of esteem in the field of bioinformatics reflects the composition of this field,
we compared the gender, name-origin, and country of affiliation of 412 researchers who had been recognized by the International Society for Computational Biology (honorees) with 34,050 researchers who had been the corresponding authors on papers in three leading bioinformatics journals between 1993 and 2019.
The proportion of female honorees was similar to that of the field.
However, names of East Asian origin have been persistently underrepresented among honorees.
Moreover, honorees with an affiliation in the US were overrepresented by a factor of 2.0.
Within the US, we found an excess of White honorees and a depletion of Asian honorees.
--></p>
<h2 id="introduction">Introduction</h2>
<p>Scientists’ roles in society include identifying important topics of study, undertaking an investigation of those topics, and disseminating their findings broadly.
The scientific enterprise is largely self-governing: scientists act as peer reviewers on papers and grants, comprise hiring committees in academia, make tenure decisions, and select which applicants will be admitted to doctoral programs.
A lack of diversity in science could lead to pernicious biases that hamper the extent to which scientific findings are relevant to minoritized communities.
Furthermore, even though minoritized groups innovate at higher rates, their novel contributions are discounted <span class="citation" data-cites="1Slc5L0l">(<a href="#ref-1Slc5L0l" role="doc-biblioref">Hofstra et al., 2020</a>)</span>.
One first step to address this systemic issue is to directly examine peer recognition in different scientific fields.</p>
<p>Gender bias among conference speakers has been recognized as an area that can be improved with targeted interventions <span class="citation" data-cites="JHzGjxks w8Lq7zPE 1G16T65Sv 1Hmlj5vSu">(<a href="#ref-1G16T65Sv" role="doc-biblioref">Klein et al., 2017</a>; <a href="#ref-w8Lq7zPE" role="doc-biblioref">Langin, 2019</a>; <a href="#ref-1Hmlj5vSu" role="doc-biblioref">Martin, 2015</a>; <a href="#ref-JHzGjxks" role="doc-biblioref">Martin, 2014</a>)</span>.
Having more female organizers on conference committees is associated with having more female speakers <span class="citation" data-cites="UxTZTP0G">(<a href="#ref-UxTZTP0G" role="doc-biblioref">Casadevall and Handelsman, 2014</a>)</span>.
At medical conferences in the US and Canada, the proportion of female speakers is increasing at a modest rate <span class="citation" data-cites="6mHXFr1Z">(<a href="#ref-6mHXFr1Z" role="doc-biblioref">Ruzycki et al., 2019</a>)</span>.
Gender bias appears to also influence funding decisions: an examination of scoring of proposals in Canada found that reviewers asked to assess the science produced a smaller gender gap in scoring than reviewers asked to assess the applicant <span class="citation" data-cites="19KEajiJN">(<a href="#ref-19KEajiJN" role="doc-biblioref">Witteman et al., 2019</a>)</span>.</p>
<p>Challenges extend beyond gender: an analysis of awards at the NIH found that proposals by Asian, black or African-American applicants were less likely to be funded than those by White applicants <span class="citation" data-cites="njNa3CYa">(<a href="#ref-njNa3CYa" role="doc-biblioref">Ginther et al., 2011</a>)</span>.
There are also potential interaction effects between gender and race or ethnicity that may particularly affect women of color’s efforts to gain NIH funding <span class="citation" data-cites="167tJVlJu">(<a href="#ref-167tJVlJu" role="doc-biblioref">Ginther et al., 2016</a>)</span>.
Another recent analysis found that minority scientists tend to apply for awards on topics with lower success rates <span class="citation" data-cites="hP9R3Quu">(<a href="#ref-hP9R3Quu" role="doc-biblioref">Hoppe et al., 2019</a>)</span>.
This finding might be the result of minority scientists selecting topics in more poorly funded areas.
Alternatively, reviewing scientists may not recognize the scientific importance of these topics, which may be of particular interest to minority scientists.</p>
<p>We sought to understand the extent to which honors and high-profile speaking invitations were distributed equitably among gender and name origin groups by an international society and its associated meetings.
As computational biologists, we focused on the <a href="https://www.iscb.org/">International Society for Computational Biology</a> (ISCB), its honorary Fellows as well as its affiliated international meetings that aim to have a global reach: <a href="https://en.wikipedia.org/wiki/Intelligent_Systems_for_Molecular_Biology">Intelligent Systems for Molecular Biology</a> (ISMB) and <a href="https://en.wikipedia.org/wiki/Research_in_Computational_Molecular_Biology">Research in Computational Molecular Biology</a> (RECOMB).</p>
<p>Existing methods were relatively US-centric because most of the data was derived in whole or in part from the US Census.
We scraped more than 700,000 entries from English-language Wikipedia that contained nationality information and built machine learning classifiers to predict name origin.
We also examined last authorships for more than 170,000 computational biology publications to establish a field-specific baseline using the same metrics.
We used methods to predict the gender and name origins of honor recipients and also examined the affiliations of authorships and honor recipients.
Analysis of affiliations by country revealed disparities between authorships and honoree affiliations.
We also observed fewer honors to scientists with East Asian name origin than expected from authorship set, an effect that persisted even after we controlled for affiliation by restricting analysis to only US-affiliated scientists.</p>
<h2 id="results">Results</h2>
<p>We curated a dataset of ISCB honors that included 412 keynote speakers at international ISCB-associated conferences (ISMB and RECOMB) as well as ISCB Fellows.
The ISCB Fellows set contained the complete set of Fellows named (2009–2019).
Keynote speakers were available for ISMB for all years from 1993–2019.
Keynote speakers for RECOMB were available for all years from 1997–2019.
We included individuals who were honored multiple times as separate entries.</p>
<p>We sought to compare this dataset with a background distribution of potential speakers, which we considered to be last authors of bioinformatics and computational biology manuscripts (see Methods).
We used authorships instead of authors as our metric for the field’s composition under the expectation that honorees would be drawn in a manner weighted by the number of last author contributions.
Using authorships also does not require accurate name disambiguation, which is an open challenge.
We scraped PubMed for manuscripts written in English from 1993–2019 with the MeSH term <a href="https://pubmed.ncbi.nlm.nih.gov/?term=%22Computational+Biology%22%5BMeSH+Terms%5D+">“computational biology”</a>.
We downloaded the metadata of manuscripts published in these journals from PubMed, which provided 176,110 articles for evaluation.
For each article, we extracted its last author’s fore name and last name for analysis.</p>
<h3 id="defining-metrics-and-a-field-specific-background">Defining metrics and a field-specific background</h3>
<p>We were faced with a number of choices as we set out to examine representation within the field.
Here, we outline the choices that we made and the rationale for these choices.</p>
<p>For one step, we needed to determine whether the most appropriate unit for analysis was researchers or honor and authorship events.
We elected to perform the analysis at the level of honors and authorships, not individuals.
Our rationale was that, if a scientist was honored three times, these three honoree slots represented distinct selection processes and should be considered separately.
We also elected to use authorships instead of authors because name disambiguation can be error prone, and because the overall design of the work was to examine authorship distributions, the precise linking of researchers was not necessary to address the research question.
As such, we estimated the gender and origin of each last name of each given paper and honoree slot, but not how many papers an individual scientist has authored or how many times they were invited as speakers or named fellows.
We also needed to determine whether or not authorships should be weighted by some property of the resulting manuscript, for example the number of citations.
We elected not to weight based on the concern that certain honors - in particular keynotes - could increase the exposure of the work and consequently increase citations which would add circularity to the analysis.</p>
<p>At another point, we needed to determine what the appropriate set of publications were to define a field-specific background distribution.
Defining this distribution is key to determining the extent to which representation diverges from that background.
Practical options included selecting authors in key society-endorsed journals or selecting those based on some article metadata.
We elected to perform the analysis to all 176,110 PubMed articles with a computational biology MeSH term to generate the largest possible set of relevant literature.</p>
<p>We assumed that, among the authors of a specific paper, the senior author (often research advisors) would be most likely to be invited for a keynote or honored as a fellow.
Based on field-specific conventions, we could have selected the last or corresponding author.
We found that corresponding authors were often first and/or last suggesting that they were highly involved with more corresponding authors being last authors than first authors.
Given the convention and the observation that corresponding authors were more often last, we selected the last author as the most appropriate in this setting.</p>
<p>We present the results with the selected strategy (Fig. <a href="#fig:workflow">1</a>); however, we performed this work through multiple iterations varying these parameters to examine the extent to which they influenced the results.
Our findings across different combinations of the above choices were consistent with respect to the broad conclusions, though the numerical results differed (see Methods).</p>
<div id="fig:workflow" class="fignos">
<figure>
<img src="https://raw.githubusercontent.com/greenelab/iscb-diversity/6c7d945df2bde1b83e52e9c786f49b0df5b27179/figs/workflow.png" style="width:90.0%" alt="Figure 1: Study framework. We extracted full names and affiliations of the last authors of 176,110 computational biology PubMed articles and those of 412 honorees. We estimated the gender, name-origin group and country of affiliation of each scientist and compared the probability values between these two groups (see Methods)." /><figcaption aria-hidden="true"><span>Figure 1:</span> Study framework. We extracted full names and affiliations of the last authors of 176,110 computational biology PubMed articles and those of 412 honorees. We estimated the gender, name-origin group and country of affiliation of each scientist and compared the probability values between these two groups (see Methods).</figcaption>
</figure>
</div>
<h3 id="similar-gender-proportion-between-iscbs-honorees-and-the-field">Similar gender proportion between ISCB’s honorees and the field</h3>
<p>We predicted the gender of honorees and authors using the <a href="https://genderize.io" class="uri">https://genderize.io</a> API, which was trained on over 100 million name-gender pairings collected from the web (see the STAR Methods for more details) and is one of the three widely-used gender inference services <span class="citation" data-cites="ODb9u77d">(<a href="#ref-ODb9u77d" role="doc-biblioref">Santamaría and Mihaljević, 2018</a>)</span>.
The predictions represent the estimated probability of an honoree or author being male or female based on their first name; we did not convert probabilities to a hard group assignment.
For example, a query to <a href="https://genderize.io" class="uri">https://genderize.io</a> on January 26, 2020 for “Casey” returns a probability of male of 0.74 and a probability of female of 0.26, which we would add for an author with this first name.
Because of technical limitations, our analysis only considered two binary gender categories, and we used “male” and “female” to refer to the gender of the scientists.
However, as described in the Discussion, we recognize the limitation of not accounting for non-binary gender categories and only considered predictions in aggregate and not as individual values for specific scientists.</p>
<p>We observed a gradual increase of the proportion of predicted female authorships, arriving at an average of approximately 28% in 2017-2019 (Fig. <a href="#fig:gender_breakdown">2</a>, left).
In recent years, ISCB Fellows and keynote speakers appear to have similar gender proportions compared to the population of authors published in computational biology and bioinformatics journals (averaged around 30% in the last three years, Fig. <a href="#fig:gender_breakdown">2</a>, right).
Examining each honor category, we observed in <a href="https://greenelab.github.io/iscb-diversity/10.visualize-gender.html#sup_fig_s1">10.visualize-gender</a> an increasing trend of honorees who were women, especially in the group of ISCB Fellows, which markedly increased after 2015.
Through 2019, there were a number of years when meetings or ISCB Fellow classes have a high proportion of honors for male honorees and none that appeared to have exclusively female honorees.
We sought to examine whether or not there was a difference in the proportion of female names between authorships and honors.
A multiple logistic regression of this proportion for the groups and year did not reveal a significant difference (<em>p</em> = 0.19).
Interaction terms did not predict the group of scientists over and above the main effect of gender probability and year.</p>
<div id="fig:gender_breakdown" class="fignos">
<figure>
<img src="https://raw.githubusercontent.com/greenelab/iscb-diversity/3bd34a600e34c49816420207fc47458b61f3949d/figs/gender_breakdown.png" style="width:70.0%" alt="Figure 2: Estimated composition of gender prediction over the years of all PubMed computational biology and bioinformatics journal authorships (left), and all ISCB honors (right). Male proportion (yellow) was computed as the average of the probability of being male of last authors (weight accordingly) or ISCB honorees each year. Female proportion (blue) was the complement of the male proportion. ISCB honors appear to have similar gender proportions compared to that of PubMed authorships." /><figcaption aria-hidden="true"><span>Figure 2:</span> Estimated composition of gender prediction over the years of
all PubMed computational biology and bioinformatics journal authorships (left),
and all ISCB honors (right).
Male proportion (yellow) was computed as the average of the probability of being male of last authors (weight accordingly) or ISCB honorees each year.
Female proportion (blue) was the complement of the male proportion.
ISCB honors appear to have similar gender proportions compared to that of PubMed authorships.</figcaption>
</figure>
</div>
<h3 id="honorees-with-celticenglish-names-are-overrepresented-while-honorees-with-east-asian-names-are-underrepresented">Honorees with Celtic/English names are overrepresented while honorees with East Asian names are underrepresented</h3>
<p>We inferred the geographical region of origin of authors’ names using a Long Short-Term Memory (LSTM) neural network trained on a dataset of 708,493 names called Wiki2019 (see the STAR Methods for details); the resulting model was called Wiki2019-LSTM.
We found that the proportion of authorships with Celtic/English names had decreased (Fig. <a href="#fig:region_breakdown">3</a>A, left).
Among keynote speakers and fellows, we found that the majority were predicted to have Celtic/English or European names (Fig. <a href="#fig:region_breakdown">3</a>A, right).
When we directly compared honor composition with PubMed, we observed discrepancies between the two groups (Fig. <a href="#fig:region_breakdown">3</a>B).
Compared to other names, there was an overabundance of Celtic/English name among the honors (OR<sub>Celtic/English</sub> = 2.39, <span class="math inline">\(\beta\)</span><sub>Celtic/English</sub> = 0.86, <em>p</em> &lt; 10<sup>-5</sup>).
Meanwhile, an East Asian name has significantly lower odds of being selected for an honor compared to other names (OR<sub>East Asian</sub> = 0.17, <span class="math inline">\(\beta\)</span><sub>East Asian</sub> = -1.75, <em>p</em> &lt; 10<sup>-5</sup>).
The two groups of scientists did not have a significant association with names predicted to be European and in Other categories (<em>p</em> = 0.11 and <em>p</em> = 0.29, respectively).
Interaction terms did not predict the group of scientists over and above the main effect of name origin probability and year.</p>
<div id="fig:region_breakdown" class="fignos">
<figure>
<img src="https://raw.githubusercontent.com/greenelab/iscb-diversity/3bd34a600e34c49816420207fc47458b61f3949d/figs/region_breakdown.png" alt="Figure 3: (A) Estimated composition of name origin prediction over the years of all PubMed computational biology and bioinformatics journal authorships (left), and all ISCB honors (right). (B) For each region, the mean predicted probability of PubMed authorships is shown as the teal generalized additive model curve. The mean probability and 95% confidence interval of the ISCB honor predictions are shown as dark circles and vertical lines. Compared to PubMed authorships, honors were more frequently associated with Celtic/English names and less frequently with East Asian names. We did not observe a statistically significant difference in other categories (see STAR Methods Table 1)." /><figcaption aria-hidden="true"><span>Figure 3:</span> (A) Estimated composition of name origin prediction over the years of
all PubMed computational biology and bioinformatics journal authorships (left),
and all ISCB honors (right).
(B) For each region, the mean predicted probability of PubMed authorships is shown as the teal generalized additive model curve.
The mean probability and 95% confidence interval of the ISCB honor predictions are shown as dark circles and vertical lines.
Compared to PubMed authorships, honors were more frequently associated with Celtic/English names and less frequently with East Asian names.
We did not observe a statistically significant difference in other categories (see STAR Methods Table <a href="#tbl:example_names">1</a>).</figcaption>
</figure>
</div>
<p>Consistent disparities were also apparent with an alternative approach that considered each pair of forename and last name was the unit of measurement.
In addition, a time-lagged model, which might be appropriate if we assume that honors accrue ten years after an author’s most prolifically cited year,
results in a similar underrepresentation of East Asian scientists’ names in the group of honorees, though the effect size is smaller.
For example, the proportion of honor associated with East Asian name origins in 2019 is still substantially less than the proportion of senior authorships associated with East Asian names in 2009.
The <a href="https://greenelab.github.io/iscb-diversity/11.visualize-name-origins.html">11.visualize-name-origins</a> analysis notebook for this portion provides the results in these scenarios.</p>
<p>We sought to disentangle geography from other factors by examining results for the country with the most affiliated scientists receiving honors, the US.
When applying the Wiki2019-LSTM model to the name origins of only US-affiliated scientists, we found a similar underrepresentation of honors to scientists with East Asian names (OR<sub>East Asian</sub> = 0.15, <span class="math inline">\(\beta\)</span><sub>East Asian</sub> = -1.89, <em>p</em> = 3.4×10<sup>-5</sup>).
We observed no statistically significant difference between the proportion of honors given to authors with Celtic/English names, European names, or names in Other categories (<em>p</em> = 0.15, <em>p</em> = 0.02, and <em>p</em> = 0.65, respectively).
Please see the <a href="https://greenelab.github.io/iscb-diversity/14.us-name-origin.html">14.us-name-origin</a> notebook for more details of the US-specific analysis.</p>
<h3 id="overrepresentation-of-us-affiliated-honorees">Overrepresentation of US-affiliated honorees</h3>
<p>We analyzed the countries of affiliation between last authorships and ISCB honors.
For each country, we report a value of log<sub>2</sub> enrichment (LOE) and its 95% confidence intervals (see Methods).
The full table with all countries and their corresponding enrichment can be browsed interactively in the corresponding <a href="https://greenelab.github.io/iscb-diversity/12.analyze-affiliation.html#enrichment_tab">12.analyze-affiliation</a> analysis notebook.
A positive value of LOE indicates a higher proportion of honorees affiliated with that country compared to authors.
A LOE value of 1 indicates that observed number of honors is twice as much as expected.
In the 20 countries with the most publications, we found an overrepresentation of honorees affiliated with institutions and companies in the US (119 speakers more than expected, LOE = 1.0, 95% CI (0.8, 1.2)) and Israel (15 speakers more than expected, LOE = 2.7, 95% CI (1.9, 3.4)), and an underrepresentation of honorees affiliated with those in China, France, Italy, India, South Korea, and Brazil (Fig. <a href="#fig:country-enrichment">4</a>).</p>
<div id="fig:country-enrichment" class="fignos">
<figure>
<img src="https://raw.githubusercontent.com/greenelab/iscb-diversity/3bd34a600e34c49816420207fc47458b61f3949d/figs/enrichment-plot.png" style="width:80.0%" alt="Figure 4: Each country’s log2 enrichment (LOE) and its 95% confidence interval (left), and the absolute difference between observed (triangle) and expected (circle) number of honors (right). Positive value of LOE indicates a higher proportion of honorees affiliated with that country compared to authors. Countries are ordered based on the proportion of authorships in the field. The overrepresentation of honorees affiliated with institutions and companies in the US and Israel contrasts the underrepresentation of honorees affiliated with those in China, France, Italy, India, South Korea, and Brazil." /><figcaption aria-hidden="true"><span>Figure 4:</span> Each country’s log<sub>2</sub> enrichment (LOE) and its 95% confidence interval (left),
and the absolute difference between observed (triangle) and expected (circle) number of honors (right).
Positive value of LOE indicates a higher proportion of honorees affiliated with that country compared to authors.
Countries are ordered based on the proportion of authorships in the field.
The overrepresentation of honorees affiliated with institutions and companies in the US and Israel contrasts the underrepresentation of honorees affiliated with those in China, France, Italy, India, South Korea, and Brazil.</figcaption>
</figure>
</div>
<h3 id="improvements-to-honoree-diversity-subsequent-to-our-primary-analysis">Improvements to Honoree Diversity Subsequent to Our Primary Analysis</h3>
<p>While our study was primarily designed to assess the diversity of honor recipients, the findings raise important questions about what can be done to address the disparities.
We examined changes subsequent to our initial report for suggestions that increased awareness may drive improvements in the practice of honoree suggestion.
We released <a href="https://github.com/greenelab/iscb-diversity-manuscript/releases/tag/v1.0">version 1.0</a> of our manuscript on 2020-01-30.
Early indications suggested an increased the diversity of honorees.
In 2020, among 12 ISCB Fellows and 5 ISMB keynote speakers, the mean predicted probability of each honoree having an East Asian name was 33%, higher than any estimate in previous years (see the <a href="https://greenelab.github.io/iscb-diversity/15.analyze-2020.html">15.analyze-2020</a> notebook).
The set of honorees also included the first ISCB Fellow from China.
Compared to past years, the 2020 honorees appeared to better reflect the diversity of scientists in the computational biology field.
These new results suggested: 1) deserving honorees who were members of under-recognized groups existed but had not been recognized, and 2) examining honoree distribution’s alignment with the field may trigger changes that begin to address issues of unequal representation.
However, we note that this analysis dealt only with more senior scientists (the last authors on scientific manuscripts) in the context of honors and that many years of changed honoree distributions will be required for the set of honored scientists to better reflect the field’s senior author contributions.</p>
<h2 id="discussion">Discussion</h2>
<p>There are significant technical and ethical challenges that one faces in carrying out retrospective work to examine the fairness of scientific practices.
A major technical challenge was to narrow down geographic origins for some groups of names.
Specific name origin groups, such as Hispanic names, are geographically disparate.
We were unable to construct a classifier that could distinguish names from Iberian countries (Spain and Portugal) from those in Latin America in the group of Hispanic names.
Discrepancies in representation between these groups are thus undetectable by our classifier.
Honoree counts of those with Hispanic names are influenced from Spain as well as Latin America.
In such cases, our analyses may understate the extent to which minoritized scientists are underrepresented among honorees and authors.
Another technical challenge is that supervised machine learning approaches are neither error free nor bias free.
By integrating different lines of evidence and preserving uncertainty by analyzing prediction probabilities rather than applying a hard assignment for each prediction, we aimed to alleviate method-specific biases and discover insightful findings that correctly reflect the current representation diversity at conferences.</p>
<p>A key ethical challenge with retrospective work to examine disparities is that algorithmic approaches to infer characteristics are often required.
This leads to significant limitations such as considering gender as a binary variable.
While this situation limits retroactive examination, there is a substantial opportunity for scientific societies, grant-making organizations, publishers, and others to proactively collect self-identified demographic information.
It is equally crucial that this information is properly used to continuously evaluate inclusion practices.</p>
<p>A difficulty that straddles the ethical and technical divide for studies examining the representation of honorees is that the background that can be best assessed, which we assess here, is the current field composition.
Scientific societies exist to promote the discipline, and many, including ISCB, include diversity as a value.
In these cases, the ideal background distribution would be the population of senior computational biologists in the absence of systemic barriers to participation.
The implication would be that scientific societies exist to reflect what the field could be, not just what it is.
However, we are limited to measuring the field as it is.
Furthermore, authorships, which we use to assess the field’s composition, are also affected by systemic barriers to participation.
We estimated the composition of the field using last author status, but in neuroscience <span class="citation" data-cites="14PjsfIPd">(<a href="#ref-14PjsfIPd" role="doc-biblioref">Shen et al., 2018</a>)</span> and other disciplines <span class="citation" data-cites="17aOPYsbT">(<a href="#ref-17aOPYsbT" role="doc-biblioref">Holman et al., 2018</a>)</span>, women are underrepresented in this position.
Such an effect would cause us to underestimate the number of women in the field.
Similarly, other studies have showed that underrepresented groups are less likely to be last authors <span class="citation" data-cites="RC8qcaWy">(<a href="#ref-RC8qcaWy" role="doc-biblioref">Marschke et al., 2018</a>)</span>, and Hispanic and Black scientists were underrepresented in academic publishing in general <span class="citation" data-cites="NyXcBvbT">(<a href="#ref-NyXcBvbT" role="doc-biblioref">Hopkins et al., 2012</a>)</span>.
Thus, systemic barriers that reduce representation within our estimation of the field would reduce apparent disparities in honor distributions as long as those systemic barriers did not also have a particular influence on the honoree selection process as well.</p>
<p>An important ethical question to ask when measuring representation is what the right level of representation is.
Societies should examine their processes to determine whether the process of selecting honorees should be equal or equitable.
For example, we found similar representation of women between authors and honorees, which suggests honoree diversity is similar to that of authors and that there may be equality during the honoree selection process.
However, if fewer women are in the field because of systemic factors that inhibit their participation, reaching equality is not equivalent to reaching equity.
In addition to holding fewer corresponding authorship positions, on average, female scientists of different disciplines are cited less often <span class="citation" data-cites="9TNbcewU">Larivière et al. (<a href="#ref-TDlPnz0i" role="doc-biblioref">2013</a>)</span>, invited by journals to submit papers less often <span class="citation" data-cites="17aOPYsbT">(<a href="#ref-17aOPYsbT" role="doc-biblioref">Holman et al., 2018</a>)</span>, suggested as reviewers less often <span class="citation" data-cites="1EYk4f8Mu">(<a href="#ref-1EYk4f8Mu" role="doc-biblioref">Lerback and Hanson, 2017</a>)</span>, and receive significantly worse review scores <span class="citation" data-cites="5HWeup6K">(<a href="#ref-5HWeup6K" role="doc-biblioref">Fox and Paine, 2019</a>)</span>.
Meanwhile, a review of women’s underrepresentation in math-intensive fields argued that today’s underrepresentation is not explained by historic forms of discrimination but factors surrounding fertility decisions and lifestyle choices, whether freely made or constrained by biology and society <span class="citation" data-cites="90sAeq8V">(<a href="#ref-90sAeq8V" role="doc-biblioref">Ceci and Williams, 2011</a>)</span>.
A recent analysis of gender inequality across different disciplines showed that, although both gender groups have equivalent annual productivity, women scientists have higher dropout rates throughout their scientific careers <span class="citation" data-cites="1MA6Qfbo">(<a href="#ref-1MA6Qfbo" role="doc-biblioref">Huang et al., 2020</a>)</span>.
Therefore, although we found that ISCB’s honorees and keynote speakers appear to have similar gender proportion to the field as a whole, the gender proportions have not reached parity.
To the extent that this gap is due to systemic barriers, the process may have reached equality but not equity.</p>
<p>It is also possible to have processes that reach neither equality nor equity.
We find that honorees include significantly fewer people of color than the field as a whole, and Asian scientists are dramatically underrepresented among honorees.
Because invitation and honor patterns could be driven by biases associated with name groups, geography, or other factors, we cross-referenced name group predictions with author affiliations to disentangle the relationship between geographic regions, name groups and invitation probabilities.
We found that disparities persisted even within the group of honorees with a US affiliation.
Societies’ honoree selection process failing to reflect the diversity of the field can play a part in why minoritized scientists’ innovations are discounted <span class="citation" data-cites="1Slc5L0l">(<a href="#ref-1Slc5L0l" role="doc-biblioref">Hofstra et al., 2020</a>)</span>.
Although we estimate the fraction of non-White and non-Asian authors to be relatively similar to the estimated honoree rate, we note that both are represented at levels substantially lower than in the US population.</p>
<p>Societies, both through their honorees and the individuals who deliver keynotes at their meetings, can play a positive role in improving the presence of female STEM role models, which can boost young students’ interests in STEM <span class="citation" data-cites="90sAeq8V">(<a href="#ref-90sAeq8V" role="doc-biblioref">Ceci and Williams, 2011</a>)</span> and, for example, lead to higher persistence for undergraduate women in geoscience <span class="citation" data-cites="1FX4fLEIy">(<a href="#ref-1FX4fLEIy" role="doc-biblioref">Hernandez et al., 2018</a>)</span>.
Efforts are underway to create Wikipedia entries for more female <span class="citation" data-cites="zdS2Wmy2">(<a href="#ref-zdS2Wmy2" role="doc-biblioref">Wade and Zaringhalam, 2018</a>)</span> and black, Asian, and minority scientists <span class="citation" data-cites="yaljvCUU">(<a href="#ref-yaljvCUU" role="doc-biblioref">O’Reilly, 2019</a>)</span>, which can help early-career scientists identify role models.
Societies can contribute toward equity if they design policies to honor scientists in ways that counter these biases such as ensuring diversity in the selection committees.</p>
<p>The central role that scientists play in evaluating each other and each other’s findings makes equity critical.
Even many nominally objective methods of assessing excellence (e.g., h-index, grant funding obtained, number of high-impact peer-reviewed publications, and total number of peer-reviewed publications) are subject to the bias of peers during review.
These could be affected by explicit biases, implicit biases, or pernicious biases in which a reviewer might consider a path of inquiry, as opposed to an individual, to be more or less meritorious based on the reviewer’s own background <span class="citation" data-cites="hP9R3Quu">Murray et al. (<a href="#ref-I8gFMDx6" role="doc-biblioref">2019</a>)</span>.
Our efforts to measure the diversity of honorees in an international society suggests that, while a focus on gender parity may be improving some aspects of diversity among honorees, contributions from scientists of color are underrecognized.</p>
<h2 id="acknowledgments">Acknowledgments</h2>
<p>We would like to thank the Gordon and Betty Moore Foundation whose support makes the study possible (GBMF4552 to D.S.H. and GBMF4552 to C.S.G.).
We thank the reviewers and editors for their insightful input to improve the quality of the study.</p>
<h2 id="author-contributions">Author Contributions</h2>
<p>Conceptualization, C.S.G.;
Methodology, T.T.L., D.S.H., A.A.H., M.R.G. and C.S.G.;
Software, T.T.L., D.S.H., A.A.H. and M.R.G.;
Investigation T.T.L., D.S.H., A.A.H., M.R.G. and C.S.G.;
Data Curation, T.T.L., D.S.H., A.A.H., M.R.G. and C.S.G.;
Writing – Original Draft, T.T.L, D.S.H and C.S.G;
Writing – Review &amp; Editing, T.T.L and C.S.G;
Visualization, T.T.L and D.S.H;
Supervision, C.S.G;
Project Administration, C.S.G;
Funding Acquisition, D.S.H and C.S.G</p>
<h2 id="declaration-of-interests">Declaration of Interests</h2>
<p>The authors declare no competing interests.</p>
<h2 id="star-methods">STAR Methods</h2>
<h3 id="key-resources-table">Key resources table</h3>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 37%" />
<col style="width: 39%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>REAGENT or RESOURCE</strong></th>
<th><strong>SOURCE</strong></th>
<th><strong>IDENTIFIER</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><em>Software and algorithms</em></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Data and code Zenodo deposit</td>
<td>This paper</td>
<td>https://doi.org/10.5281/zenodo.5014756</td>
</tr>
<tr class="odd">
<td>Source code on GitHub</td>
<td>This paper</td>
<td>https://github.com/greenelab/iscb-diversity</td>
</tr>
<tr class="even">
<td>Browsable Python and R notebooks</td>
<td>This paper</td>
<td>https://greenelab.github.io/iscb-diversity/</td>
</tr>
<tr class="odd">
<td>PubmedPy</td>
<td>This paper</td>
<td>https://github.com/dhimmel/pubmedpy</td>
</tr>
<tr class="even">
<td>Manubot</td>
<td>Himmelstein et al., 2019</td>
<td>https://doi.org/10.1371/journal.pcbi.1007128</td>
</tr>
<tr class="odd">
<td>Name origin prediction</td>
<td>This paper</td>
<td>https://github.com/greenelab/wiki-nationality-estimate</td>
</tr>
<tr class="even">
<td>Geotext</td>
<td>Yaser Martinez Palenzuela <a href="mailto:yaser.martinez@gmail.com" class="email">yaser.martinez@gmail.com</a></td>
<td>https://github.com/elyase/geotext</td>
</tr>
<tr class="odd">
<td>Geopy Nominatim</td>
<td>https://github.com/geopy/geopy</td>
<td>https://geopy.readthedocs.io/en/stable/#nominatim</td>
</tr>
<tr class="even">
<td>Genderize.io</td>
<td>https://genderize.io/</td>
<td>https://genderize.io/</td>
</tr>
<tr class="odd">
<td><em>Other</em></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Manuscript repository</td>
<td>This paper</td>
<td>https://github.com/greenelab/iscb-diversity-manuscript</td>
</tr>
</tbody>
</table>
<h3 id="resource-availability">Resource Availability</h3>
<h4 id="lead-contact">Lead Contact</h4>
<p>Further information and requests for resources and reagents should be directed to and will be fulfilled by the Lead Contact, Casey Greene (casey.s.greene@cuanschutz.edu).</p>
<h4 id="materials-availability">Materials Availability</h4>
<p>This study did not generate new materials.</p>
<h4 id="data-and-code-availability">Data and Code Availability</h4>
<p>All data have been deposited at <a href="https://github.com/greenelab/iscb-diversity" class="uri">https://github.com/greenelab/iscb-diversity</a> and are publicly available as of the date of publication.
DOIs are listed in the key resources table.
Our Wikipedia name dataset is dedicated to the public domain under CC0 License at <a href="https://github.com/greenelab/wiki-nationality-estimate" class="uri">https://github.com/greenelab/wiki-nationality-estimate</a>, with source code to construct the dataset available under a BSD 3-Clause License.</p>
<p>All original code has been deposited at Zenodo and is publicly available as of the date of publication.
DOIs are listed in the key resources table.
Specifically, our analysis of authors and ISCB-associated honorees is available under CC BY 4.0 at <a href="https://github.com/greenelab/iscb-diversity" class="uri">https://github.com/greenelab/iscb-diversity</a>, with source code also distributed under a BSD 3-Clause License <span class="citation" data-cites="Md97mWZe">(<a href="#ref-Md97mWZe" role="doc-biblioref">Le et al., 2021</a>)</span>.
Rendered Python and R notebooks from this repository are browsable at <a href="https://greenelab.github.io/iscb-diversity/">greenelab.github.io/iscb-diversity</a>.
Our analysis of PubMed, PubMed Central, and author names relies on the Python pubmedpy package, developed as part of this project and available under a Blue Oak Model License 1.0 at <a href="https://github.com/dhimmel/pubmedpy" class="uri">https://github.com/dhimmel/pubmedpy</a> and on <a href="https://pypi.org/project/pubmedpy/">PyPI</a>.
No additional information is required to reanalyze the data reported in this paper.</p>
<p>This manuscript was written openly on GitHub at <a href="https://github.com/greenelab/iscb-diversity-manuscript">github.com/greenelab/iscb-diversity-manuscript</a> using Manubot <span class="citation" data-cites="YuJbg3zO">(<a href="#ref-YuJbg3zO" role="doc-biblioref">Himmelstein et al., 2019</a>)</span>.
The Manubot HTML version is available under a Creative Commons Attribution (CC BY 4.0) License at <a href="https://greenelab.github.io/iscb-diversity-manuscript/">greenelab.github.io/iscb-diversity-manuscript</a>.</p>
<h3 id="method-details">Method details</h3>
<h4 id="honoree-curation">Honoree Curation</h4>
<p>From <a href="http://web.archive.org/web/20200116150052/https://www.iscb.org/iscb-fellows">ISCB’s webpage listing <strong>ISCB Distinguished Fellows</strong></a>, we found recipients listed by their full names for the years 2009–2019.
We gleaned the full name of the Fellow as well as the year in which they received the honor.
We identified major ISCB-associated conferences as those designated flagship (ISMB) or those that had been held on many continents (RECOMB).
To identify <strong>ISMB Keynote Speakers</strong>, we examined the webpage for each ISMB meeting.
The invited speakers at ISMB before 2001 were listed in the Preface pages of each year’s proceedings, which were archived in the <a href="https://aaai.org/Library/ISMB/ismb-library.php">ISMB collection</a> of the AAAI digital library.
We found full names of all keynote speakers for the years 1993–2019.</p>
<p>For the RECOMB meeting, we found conference webpages with keynote speakers for 1999, 2000, 2001, 2004, 2007, 2008, and 2010–2019.
We were able to fill in the missing years using information from the RECOMB 2016 proceedings, which summarizes the first 20 years of the RECOMB conference <span class="citation" data-cites="1Bji9UOxF">(<a href="#ref-1Bji9UOxF" role="doc-biblioref">2016</a>)</span>.
This volume has two tables of keynote speakers from 1997–2006 (Table 14, page XXVII) and 2007–2016 (Table 4, page 8).
Using these tables to verify the conference speaker lists, we arrived at two special instances of inclusion/exclusion.
Although Jun Wang was not included in these tables, we were able to confirm that he was a keynote speaker in 2011 with the RECOMB 2011 proceedings <span class="citation" data-cites="DBJsvxt7">(<a href="#ref-DBJsvxt7" role="doc-biblioref">2011</a>)</span>, and thus we included this speaker in the dataset.
Marian Walhout was invited as a keynote speaker but had to <a href="http://recomb2015.mimuw.edu.pl/node/18.html">cancel</a> the talk due to other obligations.
Because her name was neither mentioned in the 2015 proceedings <span class="citation" data-cites="aziMb8CD">(<a href="#ref-aziMb8CD" role="doc-biblioref">2015</a>)</span> nor in the above-mentioned tables, we excluded this speaker from our dataset.</p>
<h5 id="name-processing">Name processing</h5>
<p>When extracting honoree names, we began with the full name as provided on the site.
Because our prediction methods required separated first and last names, we chose the first non-initial name as the first name and the final name as the last name.
We did not consider a hyphen to be a name separator:
for hyphenated names, all components were included.
For metadata from PubMed and PMC where first (fore) and last names are coded separately, we applied the same cleaning steps.
We created <a href="https://git.dhimmel.com/pubmedpy/names.html">functions to simplify names</a> in the pubmedpy Python package to support standardized fore and last name processing.</p>
<h4 id="last-author-extraction">Last author extraction</h4>
<p>We assumed that, in the list of authors for a specific paper, last authors (often research advisors) would be most likely to be invited for keynotes or to be honored as fellows.
Therefore, we utilized <a href="https://pubmed.ncbi.nlm.nih.gov/">PubMed</a> to retrieve last author names to assess the composition of the field.
PubMed is a search engine resource provided by the US National Library of Medicine and index scholarly articles.
PubMed contains a record for every article published in journals it indexes (30 million records total circa 2020), within which we were able to extract author first and last names and their order using the E-Utilities APIs.
To automate and generalize these tasks, we created the <a href="https://github.com/dhimmel/pubmedpy">pubmedpy</a> Python package.</p>
<p>From PubMed, we compiled a catalog of 176,773 journal articles that were published from 1993 through 2019 that were written in English and tagged with the MeSH term <a href="https://pubmed.ncbi.nlm.nih.gov/?term=%22Computational+Biology%22%5BMeSH+Terms%5D+">“computational biology”</a>, which is <a href="https://www.ncbi.nlm.nih.gov/mesh/68019295">equivalent</a> to “bioinformatics” and includes categories such as genomics and systems biology (via PubMed’s term explosion to include subterms).
Excluding 663 articles with no author information and years with less than 200 articles/year, we analyzed 176,110 articles from 1998–2019.
We extracted the number of times an article has been cited by PubMed Central articles from the <code>PmcRefCount</code> of the PubMed DocSum XML records.</p>
<h4 id="countries-of-affiliations">Countries of Affiliations</h4>
<p>Publications often provide affiliation lists for authors, which generally associate authors with research organizations and their corresponding physical addresses.
We implemented affiliation extraction in the pubmedpy Python package for both PubMed and PMC XML records.
These methods extract a sequence of textual affiliations for each author.</p>
<p>We relied on two Python utilities to extract countries from text: <a href="https://github.com/elyase/geotext">geotext</a> and <a href="https://geopy.readthedocs.io/en/stable/#nominatim"><code>geopy.geocoders.Nominatim</code></a>.
The first, geotext, used regular expressions to find mentions of places from the <a href="http://www.geonames.org/">GeoNames database</a>.
To avoid mislabeling, we only mapped the affiliation to a country if geotext identified 2 or more mentions of that country.
For example, in the affiliation string “Laboratory of Computational and Quantitative Biology, Paris, France”, geotext detected 2 mentions of places in France: Paris, France.
In this case, we assign France to this affiliation.</p>
<p>This country extraction method accommodates multiple countries.
Although ideally each affiliation record would refer to one and only one research organization, sometimes journals deposit multiple affiliations in a single structured affiliation.
In these cases, we assigned multiple countries to the article.
For more details on this approach, please consult the accompanying <a href="https://github.com/greenelab/iscb-diversity/blob/3bd34a600e34c49816420207fc47458b61f3949d/07.affiliations-to-countries.ipynb">07.affiliations-to-countries</a> notebook and <a href="https://github.com/greenelab/iscb-diversity/blob/3bd34a600e34c49816420207fc47458b61f3949d/data/affiliations/geocode.jsonl.xz">label dataset</a>.</p>
<p>When geotext did not return results, we use the geopy approach, which returns a single country for an affiliation when successful.
Its <code>geocoders.Nominatim</code> function converts names / addresses to geographic coordinates using the OpenStreetMap’s <a href="https://nominatim.org/">Nomatim</a> service.
With this method, we split a textual affiliation by punctuation into a list of strings and iterate backward through this list until we found a Nomatim search result.
For the above affiliation, the search order would be “France”, “Paris”, and “Laboratory of Computational and Quantitative Biology”.
Since Nomatim would return a match for the first term “France” (matched to France), the search would stop before getting to “Paris”, and “France” would be assigned to this affiliation.</p>
<p>Our ability to assign countries to authors was largely driven by the availability of affiliations.
The country-assignment-rate for last authors from PubMed records was approximately 47%.
This reflects the varying availability of affiliation metadata by journal.</p>
<p>For ISCB honorees, during the curation process, if an honoree was listed with their affiliation at the time, we recorded this affiliation for analysis.
For ISCB Fellows, we used the affiliation listed on the ISCB page.
Because we could not find affiliations for the 1997 and 1998 RECOMB keynote speakers’ listed for these years, they were left blank.
If an author or speaker had more than one affiliation, each was inversely weighted by the number of affiliations that individual had.</p>
<h4 id="estimation-of-gender">Estimation of Gender</h4>
<p>We predicted the gender of honorees and authors using the <a href="https://genderize.io" class="uri">https://genderize.io</a> API, which was trained on over 100 million name-gender pairings collected from the web and is one of the three widely-used gender inference services <span class="citation" data-cites="ODb9u77d">(<a href="#ref-ODb9u77d" role="doc-biblioref">Santamaría and Mihaljević, 2018</a>)</span>.
We used author and honoree first names to retrieve predictions from genderize.io.
The predictions represent the probability of an honoree or author being male or female.
We used the estimated probabilities and did not convert to a hard group assignment.
For example, a query to <a href="https://genderize.io" class="uri">https://genderize.io</a> on January 26, 2020 for “Casey” returns a probability of male of 0.74 and a probability of female of 0.26, which we would add for an author with this first name.
Because of technical limitations, our analysis only considered two binary gender categories, and we used “male” and “female” to refer to the gender of the scientists.
However, we recognized the limitation of not accounting for non-binary gender categories and only considered predictions in aggregate and not as individual values for specific scientists.</p>
<p>Of 412 ISCB honorees, genderize.io fails to provide gender predictions for one name.
Of 176,110 last authors, 1,014 were missing a fore name in the raw paper metadata and 11,498 had fore names consisting of only initials.
Specifically, the metadata for most papers before 2002 (2,566 out of 2,601 papers) only have initials for first and/or middle author names.
Without gender predictions for these names, we consider only articles from 2002 on when comparing gender compositions between two groups.
Of the remaining authors, genderize.io failed to predict gender for 10,003 of these fore names.
We note that approximately 42% of these NA predictions are hyphenated names, which is likely because they are more unique and thus are more difficult to find predictions for.
<!-- 82% of these names were predicted to be of Asian origin by last name (see the race/ethnicity prediction model below). -->
This bias of NA predictions toward non-English names has been previously observed <span class="citation" data-cites="cLM5pKQN">(<a href="#ref-cLM5pKQN" role="doc-biblioref">Wais, 2016</a>)</span> and may have a minor influence on the final estimate of gender compositions.</p>
<h4 id="estimation-of-name-origin-groups">Estimation of Name Origin Groups</h4>
<p>We developed a model to predict geographical origins of names.
The existing Python package ethnicolr <span class="citation" data-cites="1Fj9uUALi">(<a href="#ref-1Fj9uUALi" role="doc-biblioref">Sood and Laohaprapanon, 2018</a>)</span> produces reasonable predictions, but its international representation in the data curated from Wikipedia in 2009 <span class="citation" data-cites="Wcublhdw">(<a href="#ref-Wcublhdw" role="doc-biblioref">Ambekar et al., 2009</a>)</span> is still limited.
For instance, 76% of the names in ethnicolr’s Wikipedia dataset are European in origin.</p>
<p>To address these limitations in ethnicolr, we built a similar classifier, a Long Short-term Memory (LSTM) neural network, to infer the region of origin from patterns in the sequences of letters in full names.
We applied this model on an updated, approximately 4.5 times larger training dataset called Wiki2019 (described below).
We tested multiple character sequence lengths and, based on this comparison, selected tri-characters for the primary results described in this work.
We trained our prediction model on 80% of the Wiki2019 dataset and evaluated its performance using the remaining 20%.
This model, which we term Wiki2019-LSTM, is available in the online file <a href="https://github.com/greenelab/wiki-nationality-estimate/blob/7554e8a124760582e22ff9b051433729b49c22a9/models/LSTM.h5"><code>LSTM.h5</code></a>.</p>
<p>To generate a training dataset for name origin prediction that reflects a modern naming landscape, we scraped the English Wikipedia’s category of <a href="https://en.wikipedia.org/wiki/Category:Living_people">Living People</a>.
This category, which contained approximately 930,000 pages at the time of processing in November 2019, is regularly curated and allowed us to avoid pages related to non-persons.
For each Wikipedia page, we used two strategies to find a full birth name and location context for that person.
First, we looked for nationality mention in the first sentence in the body of the text.
In most English-language biographical Wikipedia pages, the first sentence usually begins with, for example, “John Edward Smith (born 1 January 1970) is an American novelist known for …”
This structure comes from editor <a href="https://en.wikipedia.org/wiki/Wikipedia:Manual_of_Style/Biography#Context">guidance on biography articles</a> and is designed to capture:</p>
<blockquote>
<p>… the country of which the person is a citizen, national or permanent resident, or if the person is notable mainly for past events, the country where the person was a citizen, national or permanent resident when the person became notable.</p>
</blockquote>
<p>Second, if this information is not available in the first sentence of the main text, we used information from the personal details sidebar; the information in this sidebar varied widely but often contained a full name and a place of birth.</p>
<p>We used regular expressions to parse out the person’s name from this structure and checked that the expression after “is a” matched a list of nationalities.
We were able to define a name and nationality for 708,493 people by using the union of these strategies.
This process produced country labels that were more fine-grained than the broader patterns that we sought to examine among honorees and authors.
We initially grouped names by continent, but later decided to model our categorization after the hierarchical taxonomy used by <a href="http://www.name-prism.com/about">NamePrism</a> <span class="citation" data-cites="OqLU02w9">(<a href="#ref-OqLU02w9" role="doc-biblioref">Ye et al., 2017</a>)</span>.
The NamePrism taxonomy was derived from name-country pairs by producing an embedding of names by Twitter contact patterns and then grouping countries using the similarity of names from those countries.
The countries associated with each grouping are shown in supplementary figure S1.
NamePrism excluded the US, Canada and Australia because these countries have been populated by a mix of immigrant groups <span class="citation" data-cites="OqLU02w9">(<a href="#ref-OqLU02w9" role="doc-biblioref">Ye et al., 2017</a>)</span>.</p>
<!-- ![NamePrism groups countries by name similarity. We used this grouping but renamed the groups to focus on the linguistic patterns based on name etymology identified by NamePrism.
](https://raw.githubusercontent.com/greenelab/iscb-diversity/3bd34a600e34c49816420207fc47458b61f3949d/figs/2020-01-31_groupings.png){#fig:nameprism_countries width="90%"} -->
<p>In an earlier version of this manuscript, we also used category names derived from NamePrism, but a reader <a href="https://github.com/greenelab/iscb-diversity-manuscript/issues/27">pointed out</a> the titles of the groupings were problematic;
therefore, in this version, we renamed these groupings to reflect that the NamePrism approach primarily identifies groups based on linguistic patterns from name etymology rather than religious or racial similarities.
We note that our mapping from nationality to name origins was not without error.
For example, a scientist of Israeli nationality may not bear a Hebrew name.
These mismatches were assessed via the heatmap of the model performance (supplementary figure S2) and complemented by the affiliation analysis below.
An alternative approach is to assign arbitrary names to these groups such as via letter coding (e.g., A, B, C, etc.), but we did not choose this strategy because ten arbitrary letters for ten groups can greatly reduce the paper’s readibility.</p>
<h4 id="predicting-name-origin-groups-with-lstm-neural-networks-and-wikipedia">Predicting Name Origin Groups with LSTM Neural Networks and Wikipedia</h4>
<p>Table <a href="#tbl:example_names">1</a> shows the size of the training set for each of the name origin groups as well as a few examples of PubMed author names that had at least 90% prediction probability in that group.
We refer to this dataset as Wiki2019 (available online in <a href="https://github.com/greenelab/wiki-nationality-estimate/blob/master/data/annotated_names.tsv"><code>annotated_names.tsv</code></a>).</p>
<div id="tbl:example_names" class="tablenos">
<table id="tbl:example_names">
<caption><span>Table 1:</span> <strong>Predicting name-origin groups of names trained on Wikipedia’s living people.</strong>
The table lists the 10 groups and the number of living people for each region that the LSTM was trained on.
Example names shows actual author names that received a high prediction for each region.
Full information about which countries comprised each region can be found in the online dataset <a href="https://github.com/greenelab/iscb-diversity/blob/3bd34a600e34c49816420207fc47458b61f3949d/data/countries/2020-01-31_groupings.tsv"><code>country_to_region.tsv</code></a>.
</caption>
<colgroup>
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 62%" />
</colgroup>
<thead>
<tr class="header">
<th>Group</th>
<th>Training Size</th>
<th>Example Names</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Celtic/English names</td>
<td>154,890</td>
<td>Adam O Hebb, Oliver G Pybus, David W Ritchie, James WJ Anderson, James W MacDonald, Robert Clarke</td>
</tr>
<tr class="even">
<td>European names</td>
<td>78,157</td>
<td>Tracey M Filzen, Jos H Beijnen, Caroline Louis-Jeune, Christian Lorenzi, Boris Vassilev, Verena Heinrich</td>
</tr>
<tr class="odd">
<td>Hispanic names</td>
<td>66,931</td>
<td>Ramón Latorre, Antonio J Jimeno-Yepes, Felipe A Simão, Paulo S L de Oliveira, Juan Carlos Rodríguez-Manzaneque, Natalia Acevedo-Luna</td>
</tr>
<tr class="even">
<td>East Asian names</td>
<td>54,588</td>
<td>Heejoon Chae, Wenchao Jiang, Haizhou Liu, Miho Uchida, Wenxuan Zhang, Jiali Feng</td>
</tr>
<tr class="odd">
<td>Arabic/Turkic/Persian names</td>
<td>31,418</td>
<td>Hamidreza Chitsaz, Farzad Sangi, Habib Motieghader, Berke Ç Toptas, Ali Aliyari, Bülent Arman Aksoy</td>
</tr>
<tr class="even">
<td>Nordic names</td>
<td>28,978</td>
<td>Cecilia M Lindgren, Ellen Larsen, Jesper R Gådin, Janne H Korhonen, Johan Åqvist, Jens Nilsson</td>
</tr>
<tr class="odd">
<td>South Asian names</td>
<td>20,025</td>
<td>Amitabh Chak, Matthew G Seetin, Matrika Gupta, Sumudu P Leelananda, VS Kumar Kolli, Swanand Gore</td>
</tr>
<tr class="even">
<td>African names</td>
<td>17,826</td>
<td>Timothy Kinyanjui, Jammbe Z Musoro, Nyaradzo M Mgodi, Magambo Phillip Kimuda, Probhonjon Baruah, Adaoha E C Ihekwaba</td>
</tr>
<tr class="odd">
<td>Hebrew names</td>
<td>4,549</td>
<td>Alexander J Sadovsky, Boris Shraiman, Gil Goldshlager, Eytan Adar, Aviva Peleg, Nir Esterman</td>
</tr>
<tr class="even">
<td>Greek names</td>
<td>4,138</td>
<td>Gianni Panagiotou, Themis Lazaridis, Eleni Mijalis, Nikolaos Tsiantis, Konstantinos A Kyritsis, Dimitris E Messinis</td>
</tr>
</tbody>
</table>
</div>
<p>We next aimed to predict the name origin groups of honorees and authors.
We constructed a training dataset with more than 700,000 name-nationality pairs by parsing the English-language Wikipedia.
We trained a LSTM neural network on n-grams to predict name groups.
We found similar performance across 1, 2, and 3-grams;
however, because the classifier required fewer epochs to train with 3-grams, we used this length in the model that we term Wiki2019-LSTM.
Our Wiki2019-LSTM returns, for each given name, a probability of that name originating from each of the specified 10 groups.
We observed a multiclass area under the receiver operating characteristic curve (AUC) score of 95.9% for the classifier, indicating that the classifier can recapitulate name origins with high sensitivity and specificity.
For each individual group, the high AUC (above 92%) suggests that our classifier was sufficient for use in a broad-scale examination of disparities.
We also observed that the model was well calibrated.
We also examined potential systematic errors between pairs of name origin groupings with a confusion heatmap and did not find off-diagonal enrichment for any pairing (supplementary figure S2).</p>
<!-- ![The Wiki2019-LSTM model performs well on the testing dataset.
The area under the ROC curve is above 92% for each category, showing strong performance across origin categories (A).
A calibration curve, computed with the caret R package, shows consistency between the predicted probabilities (midpoints of each fixed-width bin) and the observed fraction of names in each bin (B).
Heatmap showing whether names from a given group (x-axis) received higher (purple) or lower (green) predictions for each group (y-axis) than would be expected by group prevalence alone (C).
The values represent log~2~ fold change between the average predicted probability and the prevalence of the corresponding predicted group in the testing dataset (null).
Scaling by group prevalence accounts for the imbalance of groups in the testing dataset.
In all cases, the classifier predicts the true groups above the expected null probability (matrix diagonals are all purple).
For off-diagonal cells, darker green indicates a lower mean prediction compared to the null.
For example, the classifier does not often mistake East Asian names as Greek, but is more prone to mistaking South Asian names as Celtic/English.
](https://raw.githubusercontent.com/greenelab/iscb-diversity/3bd34a600e34c49816420207fc47458b61f3949d/figs/fig_3.png){#fig:wiki2019_lstm width=100%} -->
<p>Applying Wiki2019-LSTM on the author and honoree datasets, we obtained name origin estimates for all honorees’ and authors’ name, except the 12,512 that did not have fore names (see breakdown in the Estimation of Gender section above).
Once again, because the large majority of author fore names prior to 2002 were recorded with initials only, predictions were not possible, and we excluded 1998–2001 when comparing name origin compositions between two groups.</p>
<h4 id="affiliation-analysis">Affiliation Analysis</h4>
<p>For each country, we computed the expected number of honorees by multiplying the proportion of authors whose affiliations were in that country with the total number of honorees.
We then performed an enrichment analysis to examine the difference in country affiliation proportions between ISCB honorees and field-specific last authors.
We calculated each country’s enrichment by dividing the observed proportion of honorees by the expected proportion of honorees.
The 95% confidence interval of the log<sub>2</sub> enrichment was estimated using the Poisson model method <span class="citation" data-cites="wH0Hk1gE">(<a href="#ref-wH0Hk1gE" role="doc-biblioref">Sahai and Khurshid, 1996</a>)</span>.</p>
<h4 id="statistical-analysis">Statistical Analysis</h4>
<p>We estimated the levels of representation by performing the following logistic regression of the group of scientists on each name’s prediction probability while controlling for year:
<span class="math display">\[g = \beta_0 + \beta_1 prob + \beta_2 y + \epsilon.\]</span>
The variable <span class="math inline">\(prob\)</span> is the prediction probablity of a demographic variable (gender and name origin) for names of scientists in group <span class="math inline">\(g\)</span> (honoree or author) during year <span class="math inline">\(y\)</span>.
<span class="math inline">\(\epsilon \sim N(0, \sigma^2)\)</span> accounts for random variation.
An effect was deemed statistically significant if its corresponding <em>p</em> &lt; <span class="math inline">\(\alpha\)</span> = 0.01.</p>
<p>We emphasize that the units in this analysis are honors and authorships.
Therefore, each row of the input data frame represents either an honor or authorship with the scientist’s name’s probability value from the gender or name origin classifier (<span class="math inline">\(prob\)</span>).
We also performed an alternative approach in which each pair of forename and last name as the unit of measurement and the citations were totaled across different papers whose last author had that name.
Controlling for each name’s citations, this method tested the demographic effects but did not account for names honored more than once and may be affected by name collisions.</p>
<p>To reiterate, we only consider the prediction probabilities in aggregate and not as individual values for specific scientists.
Moreover, although the average of the probabilities is not exactly “proportion”, we use the phrase “estimated proportion” for readability.
For example, the average of the probabilities of authors having an East Asian name origin is the estimate for the proportion of authors with East Asian names.</p>
<h4 id="iterative-research-process">Iterative Research Process</h4>
<p>Parallel analyses for the other versions are available in supplementary figure S3.
In our <a href="https://greenelab.github.io/iscb-diversity-manuscript/v/711edb01f5335a4c1bb8e1e0575618586a7abf9b/">first version</a> of the analysis pipeline, we sought to characterize the distribution of authorships in the field using field-specific journals.
This resulted in an analysis set of 29,755 authorships.
We also examined corresponding authors, as we considered that senior authors may occasionally occupy a different position <span class="citation" data-cites="ehwQrUKL">(<a href="#ref-ehwQrUKL" role="doc-biblioref">Larivière et al., 2016</a>)</span>, and only fell back to last authors in cases where corresponding author annotations were unavailable.</p>
<p>In the <a href="https://greenelab.github.io/iscb-diversity-manuscript/v/6bda862974e77beb98697f39c18027683af158cb/">next version</a> of the analysis, we extended the analysis to all 176,110 computational biology PubMed articles, substantially increasing the sample size.
We also extracted names of last authors instead of other potential selections to better capture the honoree population.
Our assumption was that, among the authors of a specific paper, the last author (often research advisors) would be most likely to be invited for a keynote or honored as a fellow.
Also, the availability of information on corresponding authors was limited, and extracting last author became a more consistent approach.</p>
<p>In <a href="https://greenelab.github.io/iscb-diversity-manuscript/v/45f778da125ac069b0e143f8172a5647cfbc3a39/">version 3</a>, instead of weighting all articles equally as in the earlier versions, we used citation count to weight articles to control for the differential impact of research contributions.
Using citation counts has key limitations: female scientists of different disciplines are cited less often than their male counterparts <span class="citation" data-cites="9TNbcewU 5HWeup6K epV1ywR4">(<a href="#ref-epV1ywR4" role="doc-biblioref">Caplar et al., 2017</a>; <a href="#ref-9TNbcewU" role="doc-biblioref">Dworkin et al., 2020</a>; <a href="#ref-5HWeup6K" role="doc-biblioref">Fox and Paine, 2019</a>)</span>.
Furthermore, the act of being honored, particularly with a keynote at an international meeting, could lead to work being more recognized and cited, which would reverse the arrow of causality.
In <a href="https://greenelab.github.io/iscb-diversity-manuscript/">version 4</a>, we returned to the equal weight for all articles.</p>
<p>Finally, in all versions of the analysis, rather than applying a hard assignment for each prediction, we analyzed the raw prediction probability values to capture the uncertainty of the prediction model.
Although we expect our estimates of disparities for citation-weighted analyses to be conservative, through each analysis, the overall findings remained consistent.
Examining the literature with and without citation weighting, we learned that disparities exist and these disparities are large enough to overcome existing disparities in citation patterns.</p>
<h2 class="page_break_before" id="references">References</h2>
<!-- Explicitly insert bibliography here -->
<div id="refs" class="references csl-bib-body" role="doc-bibliography">
<div id="ref-DBJsvxt7" class="csl-entry" role="doc-biblioentry">
(2011). Research in Computational Molecular Biology (Springer Science and Business Media LLC).
</div>
<div id="ref-aziMb8CD" class="csl-entry" role="doc-biblioentry">
(2015). Research in Computational Molecular Biology (Springer Science and Business Media LLC).
</div>
<div id="ref-1Bji9UOxF" class="csl-entry" role="doc-biblioentry">
(2016). Research in Computational Molecular Biology (Springer Science and Business Media LLC).
</div>
<div id="ref-Wcublhdw" class="csl-entry" role="doc-biblioentry">
Ambekar, A., Ward, C., Mohammed, J., Male, S., and Skiena, S. (2009). Name-ethnicity classification from open sources. Association for Computing Machinery (ACM).
</div>
<div id="ref-epV1ywR4" class="csl-entry" role="doc-biblioentry">
Caplar, N., Tacchella, S., and Birrer, S. (2017). Quantitative evaluation of gender bias in astronomical publications from citation counts. Nature Astronomy <em>1</em>, 0141.
</div>
<div id="ref-UxTZTP0G" class="csl-entry" role="doc-biblioentry">
Casadevall, A., and Handelsman, J. (2014). The Presence of Female Conveners Correlates with a Higher Proportion of Female Speakers at Scientific Symposia. mBio <em>5</em>.
</div>
<div id="ref-90sAeq8V" class="csl-entry" role="doc-biblioentry">
Ceci, S.J., and Williams, W.M. (2011). Understanding current causes of women's underrepresentation in science. Proceedings of the National Academy of Sciences <em>108</em>, 3157–3162.
</div>
<div id="ref-9TNbcewU" class="csl-entry" role="doc-biblioentry">
Dworkin, J.D., Linn, K.A., Teich, E.G., Zurn, P., Shinohara, R.T., and Bassett, D.S. (2020). The extent and drivers of gender imbalance in neuroscience reference lists (arXiv).
</div>
<div id="ref-5HWeup6K" class="csl-entry" role="doc-biblioentry">
Fox, C.W., and Paine, C.E.T. (2019). Gender differences in peer review outcomes and manuscript impact at six journals of ecology and evolution. Ecology and Evolution <em>9</em>, 3599–3619.
</div>
<div id="ref-njNa3CYa" class="csl-entry" role="doc-biblioentry">
Ginther, D.K., Schaffer, W.T., Schnell, J., Masimore, B., Liu, F., Haak, L.L., and Kington, R. (2011). Race, Ethnicity, and NIH Research Awards. Science <em>333</em>, 1015–1019.
</div>
<div id="ref-167tJVlJu" class="csl-entry" role="doc-biblioentry">
Ginther, D.K., Kahn, S., and Schaffer, W.T. (2016). Gender, Race/Ethnicity, and National Institutes of Health R01 Research Awards. Academic Medicine <em>91</em>, 1098–1107.
</div>
<div id="ref-1FX4fLEIy" class="csl-entry" role="doc-biblioentry">
Hernandez, P.R., Bloodhart, B., Adams, A.S., Barnes, R.T., Burt, M., Clinton, S.M., Du, W., Godfrey, E., Henderson, H., Pollack, I.B., et al. (2018). Role modeling is a viable retention strategy for undergraduate women in the geosciences. Geosphere.
</div>
<div id="ref-YuJbg3zO" class="csl-entry" role="doc-biblioentry">
Himmelstein, D.S., Rubinetti, V., Slochower, D.R., Hu, D., Malladi, V.S., Greene, C.S., and Gitter, A. (2019). Open collaborative writing with Manubot. PLOS Computational Biology <em>15</em>, e1007128.
</div>
<div id="ref-1Slc5L0l" class="csl-entry" role="doc-biblioentry">
Hofstra, B., Kulkarni, V.V., Munoz-Najar Galvez, S., He, B., Jurafsky, D., and McFarland, D.A. (2020). The Diversity–Innovation Paradox in Science. Proceedings of the National Academy of Sciences <em>117</em>, 9284–9291.
</div>
<div id="ref-17aOPYsbT" class="csl-entry" role="doc-biblioentry">
Holman, L., Stuart-Fox, D., and Hauser, C.E. (2018). The gender gap in science: How long until women are equally represented? PLOS Biology <em>16</em>, e2004956.
</div>
<div id="ref-NyXcBvbT" class="csl-entry" role="doc-biblioentry">
Hopkins, A.L., Jawitz, J.W., McCarty, C., Goldman, A., and Basu, N.B. (2012). Disparities in publication patterns by gender, race and ethnicity based on a survey of a random sample of authors. Scientometrics <em>96</em>, 515–534.
</div>
<div id="ref-hP9R3Quu" class="csl-entry" role="doc-biblioentry">
Hoppe, T.A., Litovitz, A., Willis, K.A., Meseroll, R.A., Perkins, M.J., Hutchins, B.I., Davis, A.F., Lauer, M.S., Valantine, H.A., Anderson, J.M., et al. (2019). Topic choice contributes to the lower rate of NIH awards to African-American/black scientists. Science Advances <em>5</em>, eaaw7238.
</div>
<div id="ref-1MA6Qfbo" class="csl-entry" role="doc-biblioentry">
Huang, J., Gates, A.J., Sinatra, R., and Barabási, A.-L. (2020). Historical comparison of gender inequality in scientific careers across countries and disciplines. Proceedings of the National Academy of Sciences <em>117</em>, 4609–4616.
</div>
<div id="ref-1G16T65Sv" class="csl-entry" role="doc-biblioentry">
Klein, R.S., Voskuhl, R., Segal, B.M., Dittel, B.N., Lane, T.E., Bethea, J.R., Carson, M.J., Colton, C., Rosi, S., Anderson, A., et al. (2017). Speaking out about gender imbalance in invited speakers improves diversity. Nature Immunology <em>18</em>, 475–478.
</div>
<div id="ref-w8Lq7zPE" class="csl-entry" role="doc-biblioentry">
Langin, K. (2019). How scientists are fighting against gender bias in conference speaker lineups. Science.
</div>
<div id="ref-TDlPnz0i" class="csl-entry" role="doc-biblioentry">
Larivière, V., Ni, C., Gingras, Y., Cronin, B., and Sugimoto, C.R. (2013). Bibliometrics: global gender disparities in science. Nature <em>504</em>, 211–213.
</div>
<div id="ref-ehwQrUKL" class="csl-entry" role="doc-biblioentry">
Larivière, V., Desrochers, N., Macaluso, B., Mongeon, P., Paul-Hus, A., and Sugimoto, C.R. (2016). Contributorship and division of labor in knowledge production. Social Studies of Science <em>46</em>, 417–435.
</div>
<div id="ref-Md97mWZe" class="csl-entry" role="doc-biblioentry">
Le, T., Himmelstein, D., and Greene, C. (2021). greenelab/iscb-diversity: ISCB analysis v4.0 release (Zenodo).
</div>
<div id="ref-1EYk4f8Mu" class="csl-entry" role="doc-biblioentry">
Lerback, J., and Hanson, B. (2017). Journals invite too few women to referee. Nature <em>541</em>, 455–457.
</div>
<div id="ref-RC8qcaWy" class="csl-entry" role="doc-biblioentry">
Marschke, G., Nunez, A., Weinberg, B.A., and Yu, H. (2018). Last Place? The Intersection of Ethnicity, Gender, and Race in Biomedical Authorship. AEA Papers and Proceedings <em>108</em>, 222–227.
</div>
<div id="ref-1Hmlj5vSu" class="csl-entry" role="doc-biblioentry">
Martin, G. (2015). Addressing the underrepresentation of women in mathematics conferences (arXiv).
</div>
<div id="ref-JHzGjxks" class="csl-entry" role="doc-biblioentry">
Martin, J.L. (2014). Ten Simple Rules to Achieve Conference Speaker Gender Balance. PLoS Computational Biology <em>10</em>, e1003903.
</div>
<div id="ref-I8gFMDx6" class="csl-entry" role="doc-biblioentry">
Murray, D., Siler, K., Larivière, V., Chan, W.M., Collings, A.M., Raymond, J., and Sugimoto, C.R. (2019). Author-Reviewer Homophily in Peer Review. Cold Spring Harbor Laboratory.
</div>
<div id="ref-yaljvCUU" class="csl-entry" role="doc-biblioentry">
O’Reilly, N. (2019). Why we’re creating Wikipedia profiles for BAME scientists. Nature d41586-019-00812-8.
</div>
<div id="ref-6mHXFr1Z" class="csl-entry" role="doc-biblioentry">
Ruzycki, S.M., Fletcher, S., Earp, M., Bharwani, A., and Lithgow, K.C. (2019). Trends in the Proportion of Female Speakers at Medical Conferences in the United States and in Canada, 2007 to 2017. JAMA Network Open <em>2</em>, e192103.
</div>
<div id="ref-wH0Hk1gE" class="csl-entry" role="doc-biblioentry">
Sahai, H., and Khurshid, A. (1996). Statistics in epidemiology: methods, techniques, and applications (Boca Raton: CRC Press).
</div>
<div id="ref-ODb9u77d" class="csl-entry" role="doc-biblioentry">
Santamaría, L., and Mihaljević, H. (2018). Comparison and benchmark of name-to-gender inference services. PeerJ Computer Science <em>4</em>, e156.
</div>
<div id="ref-14PjsfIPd" class="csl-entry" role="doc-biblioentry">
Shen, Y.A., Webster, J.M., Shoda, Y., and Fine, I. (2018). Persistent Underrepresentation of Women’s Science in High Profile Journals. Cold Spring Harbor Laboratory.
</div>
<div id="ref-1Fj9uUALi" class="csl-entry" role="doc-biblioentry">
Sood, G., and Laohaprapanon, S. (2018). Predicting Race and Ethnicity From the Sequence of Characters in a Name (arXiv).
</div>
<div id="ref-zdS2Wmy2" class="csl-entry" role="doc-biblioentry">
Wade, J., and Zaringhalam, M. (2018). Why we’re editing women scientists onto Wikipedia. Nature d41586-018-05947-8.
</div>
<div id="ref-cLM5pKQN" class="csl-entry" role="doc-biblioentry">
Wais, K. (2016). Gender Prediction Methods Based on First Names with genderizeR. The R Journal <em>8</em>, 17.
</div>
<div id="ref-19KEajiJN" class="csl-entry" role="doc-biblioentry">
Witteman, H.O., Hendricks, M., Straus, S., and Tannenbaum, C. (2019). Are gender gaps due to evaluations of the applicant or the science? A natural experiment at a national funding agency. The Lancet <em>393</em>, 531–540.
</div>
<div id="ref-OqLU02w9" class="csl-entry" role="doc-biblioentry">
Ye, J., Han, S., Hu, Y., Coskun, B., Liu, M., Qin, H., and Skiena, S. (2017). Nationality Classification Using Name Embeddings. Association for Computing Machinery (ACM).
</div>
</div>
<!-- default theme -->

<style>
  /* import google fonts */
  @import url("https://fonts.googleapis.com/css?family=Open+Sans:400,600,700");
  @import url("https://fonts.googleapis.com/css?family=Source+Code+Pro");

  /* -------------------------------------------------- */
  /* global */
  /* -------------------------------------------------- */

  /* all elements */
  * {
    /* force sans-serif font unless specified otherwise */
    font-family: "Open Sans", "Helvetica", sans-serif;

    /* prevent text inflation on some mobile browsers */
    -webkit-text-size-adjust: none !important;
    -moz-text-size-adjust: none !important;
    -o-text-size-adjust: none !important;
    text-size-adjust: none !important;
  }

  @media only screen {
    /* "page" element */
    body {
      position: relative;
      box-sizing: border-box;
      font-size: 12pt;
      line-height: 1.5;
      max-width: 8.5in;
      margin: 20px auto;
      padding: 40px;
      border-radius: 5px;
      border: solid 1px #bdbdbd;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      background: #ffffff;
    }
  }

  /* when on screen < 8.5in wide */
  @media only screen and (max-width: 8.5in) {
    /* "page" element */
    body {
      padding: 20px;
      margin: 0;
      border-radius: 0;
      border: none;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05) inset;
      background: none;
    }
  }

  /* -------------------------------------------------- */
  /* headings */
  /* -------------------------------------------------- */

  /* all headings */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin: 20px 0;
    padding: 0;
    font-weight: bold;
  }

  /* biggest heading */
  h1 {
    margin: 40px 0;
    text-align: center;
  }

  /* second biggest heading */
  h2 {
    margin-top: 30px;
    padding-bottom: 5px;
    border-bottom: solid 1px #bdbdbd;
  }

  /* heading font sizes */
  h1 {
    font-size: 2em;
  }
  h2 {
    font-size: 1.5em;
  }
  h3 {
    font-size: 1.35em;
  }
  h4 {
    font-size: 1.25em;
  }
  h5 {
    font-size: 1.15em;
  }
  h6 {
    font-size: 1em;
  }

  /* -------------------------------------------------- */
  /* manuscript header */
  /* -------------------------------------------------- */

  /* manuscript title */
  header > h1 {
    margin: 0;
  }

  /* manuscript title caption text (ie "automatically generated on") */
  header + p {
    text-align: center;
    margin-top: 10px;
  }

  /* -------------------------------------------------- */
  /* text elements */
  /* -------------------------------------------------- */

  /* links */
  a {
    color: #2196f3;
    overflow-wrap: break-word;
  }

  /* superscripts and subscripts */
  sub,
  sup {
    /* prevent from affecting line height */
    line-height: 0;
  }

  /* unordered and ordered lists*/
  ul,
  ol {
    padding-left: 20px;
  }

  /* class for styling text semibold */
  .semibold {
    font-weight: 600;
  }

  /* class for styling elements horizontally left aligned */
  .left {
    display: block;
    text-align: left;
    margin-left: auto;
    margin-right: 0;
    justify-content: left;
  }

  /* class for styling elements horizontally centered */
  .center {
    display: block;
    text-align: center;
    margin-left: auto;
    margin-right: auto;
    justify-content: center;
  }

  /* class for styling elements horizontally right aligned */
  .right {
    display: block;
    text-align: right;
    margin-left: 0;
    margin-right: auto;
    justify-content: right;
  }

  /* -------------------------------------------------- */
  /* section elements */
  /* -------------------------------------------------- */

  /* horizontal divider line */
  hr {
    border: none;
    height: 1px;
    background: #bdbdbd;
  }

  /* paragraphs, horizontal dividers, figures, tables, code */
  p,
  hr,
  figure,
  table,
  pre {
    /* treat all as "paragraphs", with consistent vertical margins */
    margin-top: 20px;
    margin-bottom: 20px;
  }

  /* -------------------------------------------------- */
  /* figures */
  /* -------------------------------------------------- */

  /* figure */
  figure {
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
  }

  /* figure caption */
  figcaption {
    padding: 0;
    padding-top: 10px;
  }

  /* figure image element */
  figure > img,
  figure > svg {
    max-width: 100%;
    display: block;
    margin-left: auto;
    margin-right: auto;
  }

  /* figure auto-number */
  img + figcaption > span:first-of-type,
  svg + figcaption > span:first-of-type {
    font-weight: bold;
    margin-right: 5px;
  }

  /* -------------------------------------------------- */
  /* tables */
  /* -------------------------------------------------- */

  /* table */
  table {
    border-collapse: collapse;
    border-spacing: 0;
    width: 100%;
    margin-left: auto;
    margin-right: auto;
  }

  /* table cells */
  th,
  td {
    border: solid 1px #bdbdbd;
    padding: 10px;
    /* squash table if too wide for page by forcing line breaks */
    overflow-wrap: break-word;
    word-break: break-word;
  }

  /* header row and even rows */
  th,
  tr:nth-child(2n) {
    background-color: #fafafa;
  }

  /* odd rows */
  tr:nth-child(2n + 1) {
    background-color: #ffffff;
  }

  /* table caption */
  caption {
    text-align: left;
    padding: 0;
    padding-bottom: 10px;
  }

  /* table auto-number */
  table > caption > span:first-of-type {
    font-weight: bold;
    margin-right: 5px;
  }

  /* -------------------------------------------------- */
  /* code */
  /* -------------------------------------------------- */

  /* multi-line code block */
  pre {
    padding: 10px;
    background-color: #eeeeee;
    color: #000000;
    border-radius: 5px;
    break-inside: avoid;
    text-align: left;
  }

  /* inline code, ie code within normal text */
  :not(pre) > code {
    padding: 0 4px;
    background-color: #eeeeee;
    color: #000000;
    border-radius: 5px;
  }

  /* code text */
  /* apply all children, to reach syntax highlighting sub-elements */
  code,
  code * {
    /* force monospace font */
    font-family: "Source Code Pro", "Courier New", monospace;
  }

  /* -------------------------------------------------- */
  /* quotes */
  /* -------------------------------------------------- */

  /* quoted text */
  blockquote {
    margin: 0;
    padding: 0;
    border-left: 4px solid #bdbdbd;
    padding-left: 16px;
    break-inside: avoid;
  }

  /* -------------------------------------------------- */
  /* banners */
  /* -------------------------------------------------- */

  /* info banners */
  .banner {
    box-sizing: border-box;
    display: block;
    position: relative;
    width: 100%;
    margin-top: 20px;
    margin-bottom: 20px;
    padding: 20px;
    text-align: center;
  }

  /* paragraph in banner */
  .banner > p {
    margin: 0;
  }

  /* -------------------------------------------------- */
  /* highlight colors */
  /* -------------------------------------------------- */

  .white {
    background: #ffffff;
  }
  .lightgrey {
    background: #eeeeee;
  }
  .grey {
    background: #757575;
  }
  .darkgrey {
    background: #424242;
  }
  .black {
    background: #000000;
  }
  .lightred {
    background: #ffcdd2;
  }
  .lightyellow {
    background: #ffecb3;
  }
  .lightgreen {
    background: #dcedc8;
  }
  .lightblue {
    background: #e3f2fd;
  }
  .lightpurple {
    background: #f3e5f5;
  }
  .red {
    background: #f44336;
  }
  .orange {
    background: #ff9800;
  }
  .yellow {
    background: #ffeb3b;
  }
  .green {
    background: #4caf50;
  }
  .blue {
    background: #2196f3;
  }
  .purple {
    background: #9c27b0;
  }
  .white,
  .lightgrey,
  .lightred,
  .lightyellow,
  .lightgreen,
  .lightblue,
  .lightpurple,
  .orange,
  .yellow,
  .white a,
  .lightgrey a,
  .lightred a,
  .lightyellow a,
  .lightgreen a,
  .lightblue a,
  .lightpurple a,
  .orange a,
  .yellow a {
    color: #000000;
  }
  .grey,
  .darkgrey,
  .black,
  .red,
  .green,
  .blue,
  .purple,
  .grey a,
  .darkgrey a,
  .black a,
  .red a,
  .green a,
  .blue a,
  .purple a {
    color: #ffffff;
  }

  /* -------------------------------------------------- */
  /* buttons */
  /* -------------------------------------------------- */

  /* class for styling links like buttons */
  .button {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    margin: 5px;
    padding: 10px 20px;
    font-size: 0.75em;
    font-weight: 600;
    text-transform: uppercase;
    text-decoration: none;
    letter-spacing: 1px;
    background: none;
    color: #2196f3;
    border: solid 1px #bdbdbd;
    border-radius: 5px;
  }

  /* buttons when hovered */
  .button:hover:not([disabled]),
  .icon_button:hover:not([disabled]) {
    cursor: pointer;
    background: #f5f5f5;
  }

  /* buttons when disabled */
  .button[disabled],
  .icon_button[disabled] {
    opacity: 0.35;
    pointer-events: none;
  }

  /* class for styling buttons containg only single icon */
  .icon_button {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    text-decoration: none;
    margin: 0;
    padding: 0;
    background: none;
    border-radius: 5px;
    border: none;
    width: 20px;
    height: 20px;
    min-width: 20px;
    min-height: 20px;
  }

  /* icon button inner svg image */
  .icon_button > svg {
    height: 16px;
  }

  /* -------------------------------------------------- */
  /* icons */
  /* -------------------------------------------------- */

  /* class for styling icons inline with text */
  .inline_icon {
    height: 1em;
    position: relative;
    top: 0.125em;
  }

  /* -------------------------------------------------- */
  /* references */
  /* -------------------------------------------------- */

  .csl-entry {
    margin-top: 15px;
    margin-bottom: 15px;
  }

  /* -------------------------------------------------- */
  /* print control */
  /* -------------------------------------------------- */

  @media print {
    @page {
      /* suggested printing margin */
      margin: 0.5in;
    }

    /* document and "page" elements */
    html,
    body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
    }

    /* "page" element */
    body {
      font-size: 11pt !important;
      line-height: 1.35;
    }

    /* all headings */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      margin: 15px 0;
    }

    /* figures and tables */
    figure,
    table {
      font-size: 0.85em;
    }

    /* table cells */
    th,
    td {
      padding: 5px;
    }

    /* shrink font awesome icons */
    i.fas,
    i.fab,
    i.far,
    i.fal {
      transform: scale(0.85);
    }

    /* decrease banner margins */
    .banner {
      margin-top: 15px;
      margin-bottom: 15px;
      padding: 15px;
    }

    /* class for centering an element vertically on its own page */
    .page_center {
      margin: auto;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      vertical-align: middle;
      break-before: page;
      break-after: page;
    }

    /* always insert a page break before the element */
    .page_break_before {
      break-before: page;
    }

    /* always insert a page break after the element */
    .page_break_after {
      break-after: page;
    }

    /* avoid page break before the element */
    .page_break_before_avoid {
      break-before: avoid;
    }

    /* avoid page break after the element */
    .page_break_after_avoid {
      break-after: avoid;
    }

    /* avoid page break inside the element */
    .page_break_inside_avoid {
      break-inside: avoid;
    }
  }

  /* -------------------------------------------------- */
  /* override pandoc css quirks */
  /* -------------------------------------------------- */

  .sourceCode {
    /* prevent unsightly overflow in wide code blocks */
    overflow: auto !important;
  }

  div.sourceCode {
    /* prevent background fill on top-most code block  container */
    background: none !important;
  }

  .sourceCode * {
    /* force consistent line spacing */
    line-height: 1.5 !important;
  }

  div.sourceCode {
    /* style code block margins same as <pre> element */
    margin-top: 20px;
    margin-bottom: 20px;
  }

  /* -------------------------------------------------- */
  /* tablenos */
  /* -------------------------------------------------- */

  /* tablenos wrapper */
  .tablenos {
    width: 100%;
    margin: 20px 0;
  }

  .tablenos > table {
    /* move margins from table to table_wrapper to allow margin collapsing */
    margin: 0;
  }

  @media only screen {
    /* tablenos wrapper */
    .tablenos {
      /* show scrollbar on tables if necessary to prevent overflow */
      overflow-x: auto !important;
    }

    .tablenos th,
    .tablenos td {
      overflow-wrap: unset !important;
      word-break: unset !important;
    }

    /* table in wrapper */
    .tablenos table,
    .tablenos table * {
      /* don't break table words */
      overflow-wrap: normal !important;
    }
  }
</style>
<!-- 
    Plugin Core

    Functions needed for and shared across all first-party plugins.
-->

<script>
  // get element that is target of hash (from link element or url)
  function getHashTarget(link) {
    const hash = link ? link.hash : window.location.hash;
    const id = hash.slice(1);
    let target = document.querySelector(`[id="${id}"]`);
    if (!target) return;

    // if figure or table, modify target to get expected element
    if (id.indexOf("fig:") === 0) target = target.querySelector("figure");
    if (id.indexOf("tbl:") === 0) target = target.querySelector("table");

    return target;
  }

  // get position/dimensions of element or viewport
  function getRectInView(element) {
    let rect = {};
    rect.left = 0;
    rect.top = 0;
    rect.right = document.documentElement.clientWidth;
    rect.bottom = document.documentElement.clientHeight;
    let style = {};

    if (element instanceof HTMLElement) {
      rect = element.getBoundingClientRect();
      style = window.getComputedStyle(element);
    }

    const margin = {};
    margin.left = parseFloat(style.marginLeftWidth) || 0;
    margin.top = parseFloat(style.marginTopWidth) || 0;
    margin.right = parseFloat(style.marginRightWidth) || 0;
    margin.bottom = parseFloat(style.marginBottomWidth) || 0;

    const border = {};
    border.left = parseFloat(style.borderLeftWidth) || 0;
    border.top = parseFloat(style.borderTopWidth) || 0;
    border.right = parseFloat(style.borderRightWidth) || 0;
    border.bottom = parseFloat(style.borderBottomWidth) || 0;

    const newRect = {};
    newRect.left = rect.left + margin.left + border.left;
    newRect.top = rect.top + margin.top + border.top;
    newRect.right = rect.right + margin.right + border.right;
    newRect.bottom = rect.bottom + margin.bottom + border.bottom;
    newRect.width = newRect.right - newRect.left;
    newRect.height = newRect.bottom - newRect.top;

    return newRect;
  }

  // get position of element relative to page
  function getRectInPage(element) {
    const rect = getRectInView(element);
    const body = getRectInView(document.body);

    const newRect = {};
    newRect.left = rect.left - body.left;
    newRect.top = rect.top - body.top;
    newRect.right = rect.right - body.left;
    newRect.bottom = rect.bottom - body.top;
    newRect.width = rect.width;
    newRect.height = rect.height;

    return newRect;
  }

  // get closest element before specified element that matches query
  function firstBefore(element, query) {
    while (element && element !== document.body && !element.matches(query))
      element = element.previousElementSibling || element.parentNode;

    return element;
  }

  // check if element is part of collapsed heading
  function isCollapsed(element) {
    while (element && element !== document.body) {
      if (element.dataset.collapsed === "true") return true;
      element = element.parentNode;
    }
    return false;
  }

  // expand any collapsed parent containers of element if necessary
  function expandElement(element) {
    if (isCollapsed(element)) {
      // accordion plugin
      const heading = firstBefore(element, "h2");
      if (heading) heading.click();
      // details/summary HTML element
      const summary = firstBefore(element, "summary");
      if (summary) summary.click();
    }
  }

  // scroll to and focus element
  function goToElement(element, offset) {
    // expand accordion section if collapsed
    expandElement(element);
    const y =
      getRectInView(element).top -
      getRectInView(document.documentElement).top -
      (offset || 0);

    // trigger any function listening for "onscroll" event
    window.dispatchEvent(new Event("scroll"));
    window.scrollTo(0, y);
    document.activeElement.blur();
    element.focus();
  }

  // get list of elements after a start element up to element matching query
  function nextUntil(element, query, exclude) {
    const elements = [];
    while (((element = element.nextElementSibling), element)) {
      if (element.matches(query)) break;
      if (!element.matches(exclude)) elements.push(element);
    }
    return elements;
  }
</script>
<!--
  Accordion Plugin

  Allows sections of content under h2 headings to be collapsible.
-->

<script type="module">
  // whether to always start expanded ('false'), always start collapsed
  // ('true'), or start collapsed when screen small ('auto')
  const startCollapsed = "auto";

  // start script
  function start() {
    // run through each <h2> heading
    const headings = document.querySelectorAll("h2");
    for (const heading of headings) {
      addArrow(heading);

      // start expanded/collapsed based on option
      if (
        startCollapsed === "true" ||
        (startCollapsed === "auto" && isSmallScreen())
      )
        collapseHeading(heading);
      else expandElement(heading);
    }

    // attach hash change listener to window
    window.addEventListener("hashchange", onHashChange);
  }

  // when hash (eg manuscript.html#introduction) changes
  function onHashChange() {
    const target = getHashTarget();
    if (target) goToElement(target);
  }

  // add arrow to heading
  function addArrow(heading) {
    // add arrow button
    const arrow = document.createElement("button");
    arrow.innerHTML = document.querySelector(".icon_angle_down").innerHTML;
    arrow.classList.add("icon_button", "accordion_arrow");
    heading.insertBefore(arrow, heading.firstChild);

    // attach click listener to heading and button
    heading.addEventListener("click", onHeadingClick);
    arrow.addEventListener("click", onArrowClick);
  }

  // determine if on mobile-like device with small screen
  function isSmallScreen() {
    return Math.min(window.innerWidth, window.innerHeight) < 480;
  }

  // when <h2> heading is clicked
  function onHeadingClick(event) {
    // only collapse if <h2> itself is target of click (eg, user did
    // not click on anchor within <h2>)
    if (event.target === this) toggleCollapse(this);
  }

  // when arrow button is clicked
  function onArrowClick() {
    toggleCollapse(this.parentNode);
  }

  // collapse section if expanded, expand if collapsed
  function toggleCollapse(heading) {
    if (heading.dataset.collapsed === "false") collapseHeading(heading);
    else expandElement(heading);
  }

  // elements to exclude from collapse, such as table of contents panel,
  // hypothesis panel, etc
  const exclude = "#toc_panel, div.annotator-frame, #lightbox_overlay";

  // collapse section
  function collapseHeading(heading) {
    heading.setAttribute("data-collapsed", "true");
    const children = getChildren(heading);
    for (const child of children) child.setAttribute("data-collapsed", "true");
  }

  // expand section
  function expandElement(heading) {
    heading.setAttribute("data-collapsed", "false");
    const children = getChildren(heading);
    for (const child of children) child.setAttribute("data-collapsed", "false");
  }

  // get list of elements between this <h2> and next <h2> or <h1>
  // ("children" of the <h2> section)
  function getChildren(heading) {
    return nextUntil(heading, "h2, h1", exclude);
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- angle down icon -->

<template class="icon_angle_down">
  <!-- modified from: https://fontawesome.com/icons/angle-down -->
  <svg width="16" height="16" viewBox="0 0 448 512">
    <path
      fill="currentColor"
      d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* accordion arrow button */
    .accordion_arrow {
      margin-right: 10px;
    }

    /* arrow icon when <h2> data-collapsed attribute true */
    h2[data-collapsed="true"] > .accordion_arrow > svg {
      transform: rotate(-90deg);
    }

    /* all elements (except <h2>'s) when data-collapsed attribute true */
    *:not(h2)[data-collapsed="true"] {
      display: none;
    }

    /* accordion arrow button when hovered and <h2>'s when hovered */
    .accordion_arrow:hover,
    h2[data-collapsed="true"]:hover,
    h2[data-collapsed="false"]:hover {
      cursor: pointer;
    }
  }

  /* always hide accordion arrow button on print */
  @media only print {
    .accordion_arrow {
      display: none;
    }
  }
</style>
<!--
  Anchors Plugin

  Adds an anchor next to each of a certain type of element that provides a
  human-readable url to that specific item/position in the document (e.g.
  "manuscript.html#abstract"). It also makes it such that scrolling out of view
  of a target removes its identifier from the url.
-->

<script type="module">
  // which types of elements to add anchors next to, in "document.querySelector"
  // format
  const typesQuery =
    'h1, h2, h3, div[id^="fig:"], div[id^="tbl:"], span[id^="eq:"]';

  // start script
  function start() {
    // add anchor to each element of specified types
    const elements = document.querySelectorAll(typesQuery);
    for (const element of elements) addAnchor(element);

    // attach scroll listener to window
    window.addEventListener("scroll", onScroll);
  }

  // when window is scrolled
  function onScroll() {
    // if url has hash and user has scrolled out of view of hash
    // target, remove hash from url
    const tolerance = 100;
    const target = getHashTarget();
    if (target) {
      if (
        target.getBoundingClientRect().top > window.innerHeight + tolerance ||
        target.getBoundingClientRect().bottom < 0 - tolerance
      )
        history.pushState(null, null, " ");
    }
  }

  // add anchor to element
  function addAnchor(element) {
    let addTo; // element to add anchor button to

    // if figure or table, modify withId and addTo to get expected
    // elements
    if (element.id.indexOf("fig:") === 0) {
      addTo = element.querySelector("figcaption");
    } else if (element.id.indexOf("tbl:") === 0) {
      addTo = element.querySelector("caption");
    } else if (element.id.indexOf("eq:") === 0) {
      addTo = element.querySelector(".eqnos-number");
    }

    addTo = addTo || element;
    const id = element.id || null;

    // do not add anchor if element doesn't have assigned id.
    // id is generated by pandoc and is assumed to be unique and
    // human-readable
    if (!id) return;

    // create anchor button
    const anchor = document.createElement("a");
    anchor.innerHTML = document.querySelector(".icon_link").innerHTML;
    anchor.title = "Link to this part of the document";
    anchor.classList.add("icon_button", "anchor");
    anchor.dataset.ignore = "true";
    anchor.href = "#" + id;
    addTo.appendChild(anchor);
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- link icon -->

<template class="icon_link">
  <!-- modified from: https://fontawesome.com/icons/link -->
  <svg width="16" height="16" viewBox="0 0 512 512">
    <path
      fill="currentColor"
      d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* anchor button */
    .anchor {
      opacity: 0;
      margin-left: 5px;
    }

    /* anchor buttons within <h2>'s */
    h2 .anchor {
      margin-left: 10px;
    }

    /* anchor buttons when hovered/focused and anything containing an anchor button when hovered */
    *:hover > .anchor,
    .anchor:hover,
    .anchor:focus {
      opacity: 1;
    }

    /* anchor button when hovered */
    .anchor:hover {
      cursor: pointer;
    }
  }

  /* always show anchor button on devices with no mouse/hover ability */
  @media (hover: none) {
    .anchor {
      opacity: 1;
    }
  }

  /* always hide anchor button on print */
  @media only print {
    .anchor {
      display: none;
    }
  }
</style>
<!-- 
    Attributes Plugin

    Allows arbitrary HTML attributes to be attached to (almost) any element.
    Place an HTML comment inside or next to the desired element with the content:
    $attribute="value"
-->

<script type="module">
  // start script
  function start() {
    // get list of comments in document
    const comments = findComments();

    for (const comment of comments)
      if (comment.parentElement)
        addAttributes(comment.parentElement, comment.nodeValue.trim());
  }

  // add html attributes to specified element based on string of
  // html attributes and values
  function addAttributes(element, text) {
    // regex's for finding attribute/value pairs in the format of
    // attribute="value" or attribute='value
    const regex2 = /\$([a-zA-Z\-]+)?=\"(.+?)\"/;
    const regex1 = /\$([a-zA-Z\-]+)?=\'(.+?)\'/;

    // loop through attribute/value pairs
    let match;
    while ((match = text.match(regex2) || text.match(regex1))) {
      // get attribute and value from regex capture groups
      let attribute = match[1];
      let value = match[2];

      // remove from string
      text = text.substring(match.index + match[0].length);

      if (!attribute || !value) break;

      // set attribute of parent element
      try {
        element.setAttribute(attribute, value);
      } catch (error) {
        console.log(error);
      }

      // special case for colspan
      if (attribute === "colspan") removeTableCells(element, value);
    }
  }

  // get list of comment elements in document
  function findComments() {
    const comments = [];

    // iterate over comment nodes in document
    function acceptNode(node) {
      return NodeFilter.FILTER_ACCEPT;
    }
    const iterator = document.createNodeIterator(
      document.body,
      NodeFilter.SHOW_COMMENT,
      acceptNode
    );
    let node;
    while ((node = iterator.nextNode())) comments.push(node);

    return comments;
  }

  // remove certain number of cells after specified cell
  function removeTableCells(cell, number) {
    number = parseInt(number);
    if (!number) return;

    // remove elements
    for (; number > 1; number--) {
      if (cell.nextElementSibling) cell.nextElementSibling.remove();
    }
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>
<!--
  Jump to First Plugin

  Adds a button next to each reference entry, figure, and table that jumps the
  page to the first occurrence of a link to that item in the manuscript.
-->

<script type="module">
  // whether to add buttons next to reference entries
  const references = "true";
  // whether to add buttons next to figures
  const figures = "true";
  // whether to add buttons next to tables
  const tables = "true";

  // start script
  function start() {
    if (references !== "false")
      makeButtons(`div[id^="ref-"]`, ".csl-left-margin", "reference");
    if (figures !== "false")
      makeButtons(`div[id^="fig:"]`, "figcaption", "figure");
    if (tables !== "false") makeButtons(`div[id^="tbl:"]`, "caption", "table");
  }

  // when jump button clicked
  function onButtonClick() {
    const first = getFirstOccurrence(this.dataset.id);
    if (!first) return;

    // update url hash so navigating "back" in history will return user to button
    window.location.hash = this.dataset.id;
    // scroll to link
    const timeout = function () {
      goToElement(first, window.innerHeight * 0.5);
    };
    window.setTimeout(timeout, 0);
  }

  // get first occurrence of link to item in document
  function getFirstOccurrence(id) {
    let query = "a";
    query += '[href="#' + id + '"]';
    // exclude buttons, anchor links, toc links, etc
    query += ":not(.button):not(.icon_button):not(.anchor):not(.toc_link)";
    return document.querySelector(query);
  }

  // add button next to each reference entry, figure, or table
  function makeButtons(query, containerQuery, subject) {
    const elements = document.querySelectorAll(query);
    for (const element of elements) {
      const id = element.id;
      const buttonContainer = element.querySelector(containerQuery);
      const first = getFirstOccurrence(id);

      // if can't find link to reference or place to put button, ignore
      if (!first || !buttonContainer) continue;

      // make jump button
      let button = document.createElement("button");
      button.classList.add("icon_button", "jump_arrow");
      button.title = `Jump to the first occurrence of this ${subject} in the document`;
      const icon = document.querySelector(".icon_angle_double_up");
      button.innerHTML = icon.innerHTML;
      button.dataset.id = id;
      button.dataset.ignore = "true";
      button.addEventListener("click", onButtonClick);
      buttonContainer.prepend(button);
    }
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- angle double up icon -->

<template class="icon_angle_double_up">
  <!-- modified from: https://fontawesome.com/icons/angle-double-up -->
  <svg width="16" height="16" viewBox="0 0 320 512">
    <path
      fill="currentColor"
      d="M177 255.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 351.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 425.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1zm-34-192L7 199.7c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l96.4-96.4 96.4 96.4c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9l-136-136c-9.2-9.4-24.4-9.4-33.8 0z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* jump button */
    .jump_arrow {
      position: relative;
      top: 0.125em;
      margin-right: 5px;
    }
  }

  /* always hide jump button on print */
  @media only print {
    .jump_arrow {
      display: none;
    }
  }
</style>
<!-- 
    Lightbox Plugin

    Makes it such that when a user clicks on an image, the image fills the
    screen and the user can pan/drag/zoom the image and navigate between other
    images in the document.
-->

<script type="module">
  // list of possible zoom/scale factors
  const zooms =
    "0.1, 0.25, 0.333333, 0.5, 0.666666, 0.75, 1, 1.25, 1.5, 1.75, 2, 2.5, 3, 3.5, 4, 5, 6, 7, 8";
  // whether to fit image to view ('fit'), display at 100% and shrink if
  // necessary ('shrink'), or always display at 100% ('100')
  const defaultZoom = "fit";
  // whether to zoom in/out toward center of view ('true') or mouse ('false')
  const centerZoom = "false";

  // start script
  function start() {
    // run through each <img> element
    const imgs = document.querySelectorAll("figure > img");
    let count = 1;
    for (const img of imgs) {
      img.classList.add("lightbox_document_img");
      img.dataset.number = count;
      img.dataset.total = imgs.length;
      img.addEventListener("click", openLightbox);
      count++;
    }

    // attach mouse and key listeners to window
    window.addEventListener("mousemove", onWindowMouseMove);
    window.addEventListener("keyup", onKeyUp);
  }

  // when mouse is moved anywhere in window
  function onWindowMouseMove(event) {
    window.mouseX = event.clientX;
    window.mouseY = event.clientY;
  }

  // when key pressed
  function onKeyUp(event) {
    if (!event || !event.key) return;

    switch (event.key) {
      // trigger click of prev button
      case "ArrowLeft":
        const prevButton = document.getElementById("lightbox_prev_button");
        if (prevButton) prevButton.click();
        break;
      // trigger click of next button
      case "ArrowRight":
        const nextButton = document.getElementById("lightbox_next_button");
        if (nextButton) nextButton.click();
        break;
      // close on esc
      case "Escape":
        closeLightbox();
        break;
    }
  }

  // open lightbox
  function openLightbox() {
    const lightbox = makeLightbox(this);
    if (!lightbox) return;

    blurBody(lightbox);
    document.body.appendChild(lightbox);
  }

  // make lightbox
  function makeLightbox(img) {
    // delete lightbox if it exists, start fresh
    closeLightbox();

    // create screen overlay containing lightbox
    const overlay = document.createElement("div");
    overlay.id = "lightbox_overlay";

    // create image info boxes
    const numberInfo = document.createElement("div");
    const zoomInfo = document.createElement("div");
    numberInfo.id = "lightbox_number_info";
    zoomInfo.id = "lightbox_zoom_info";

    // create container for image
    const imageContainer = document.createElement("div");
    imageContainer.id = "lightbox_image_container";
    const lightboxImg = makeLightboxImg(
      img,
      imageContainer,
      numberInfo,
      zoomInfo
    );
    imageContainer.appendChild(lightboxImg);

    // create bottom container for caption and navigation buttons
    const bottomContainer = document.createElement("div");
    bottomContainer.id = "lightbox_bottom_container";
    const caption = makeCaption(img);
    const prevButton = makePrevButton(img);
    const nextButton = makeNextButton(img);
    bottomContainer.appendChild(prevButton);
    bottomContainer.appendChild(caption);
    bottomContainer.appendChild(nextButton);

    // attach top middle and bottom to overlay
    overlay.appendChild(numberInfo);
    overlay.appendChild(zoomInfo);
    overlay.appendChild(imageContainer);
    overlay.appendChild(bottomContainer);

    return overlay;
  }

  // make <img> object that is intuitively draggable and zoomable
  function makeLightboxImg(sourceImg, container, numberInfoBox, zoomInfoBox) {
    // create copy of source <img>
    const img = sourceImg.cloneNode(true);
    img.classList.remove("lightbox_document_img");
    img.removeAttribute("id");
    img.removeAttribute("width");
    img.removeAttribute("height");
    img.style.position = "unset";
    img.style.margin = "0";
    img.style.padding = "0";
    img.style.width = "";
    img.style.height = "";
    img.style.minWidth = "";
    img.style.minHeight = "";
    img.style.maxWidth = "";
    img.style.maxHeight = "";
    img.id = "lightbox_img";

    // build sorted list of zoomSteps
    const zoomSteps = zooms.split(/[^0-9.]/).map((step) => parseFloat(step));
    zoomSteps.sort((a, b) => a - b);

    // <img> object property variables
    let zoom = 1;
    let translateX = 0;
    let translateY = 0;
    let clickMouseX = undefined;
    let clickMouseY = undefined;
    let clickTranslateX = undefined;
    let clickTranslateY = undefined;

    updateNumberInfo();

    // update image numbers displayed in info box
    function updateNumberInfo() {
      numberInfoBox.innerHTML =
        sourceImg.dataset.number + " of " + sourceImg.dataset.total;
    }

    // update zoom displayed in info box
    function updateZoomInfo() {
      let zoomInfo = zoom * 100;
      if (!Number.isInteger(zoomInfo)) zoomInfo = zoomInfo.toFixed(2);
      zoomInfoBox.innerHTML = zoomInfo + "%";
    }

    // move to closest zoom step above current zoom
    const zoomIn = function () {
      for (const zoomStep of zoomSteps) {
        if (zoomStep > zoom) {
          zoom = zoomStep;
          break;
        }
      }
      updateTransform();
    };

    // move to closest zoom step above current zoom
    const zoomOut = function () {
      zoomSteps.reverse();
      for (const zoomStep of zoomSteps) {
        if (zoomStep < zoom) {
          zoom = zoomStep;
          break;
        }
      }
      zoomSteps.reverse();

      updateTransform();
    };

    // update display of <img> based on scale/translate properties
    const updateTransform = function () {
      // set transform
      img.style.transform =
        "translate(" +
        (translateX || 0) +
        "px," +
        (translateY || 0) +
        "px) scale(" +
        (zoom || 1) +
        ")";

      // get new width/height after scale
      const rect = img.getBoundingClientRect();
      // limit translate
      translateX = Math.max(translateX, -rect.width / 2);
      translateX = Math.min(translateX, rect.width / 2);
      translateY = Math.max(translateY, -rect.height / 2);
      translateY = Math.min(translateY, rect.height / 2);

      // set transform
      img.style.transform =
        "translate(" +
        (translateX || 0) +
        "px," +
        (translateY || 0) +
        "px) scale(" +
        (zoom || 1) +
        ")";

      updateZoomInfo();
    };

    // fit <img> to container
    const fit = function () {
      // no x/y offset, 100% zoom by default
      translateX = 0;
      translateY = 0;
      zoom = 1;

      // widths of <img> and container
      const imgWidth = img.naturalWidth;
      const imgHeight = img.naturalHeight;
      const containerWidth = parseFloat(
        window.getComputedStyle(container).width
      );
      const containerHeight = parseFloat(
        window.getComputedStyle(container).height
      );

      // how much zooming is needed to fit <img> to container
      const xRatio = imgWidth / containerWidth;
      const yRatio = imgHeight / containerHeight;
      const maxRatio = Math.max(xRatio, yRatio);
      const newZoom = 1 / maxRatio;

      // fit <img> to container according to option
      if (defaultZoom === "shrink") {
        if (maxRatio > 1) zoom = newZoom;
      } else if (defaultZoom === "fit") zoom = newZoom;

      updateTransform();
    };

    // when mouse wheel is rolled anywhere in container
    const onContainerWheel = function (event) {
      if (!event) return;

      // let ctrl + mouse wheel to zoom behave as normal
      if (event.ctrlKey) return;

      // prevent normal scroll behavior
      event.preventDefault();
      event.stopPropagation();

      // point around which to scale img
      const viewRect = container.getBoundingClientRect();
      const viewX = (viewRect.left + viewRect.right) / 2;
      const viewY = (viewRect.top + viewRect.bottom) / 2;
      const originX = centerZoom === "true" ? viewX : mouseX;
      const originY = centerZoom === "true" ? viewY : mouseY;

      // get point on image under origin
      const oldRect = img.getBoundingClientRect();
      const oldPercentX = (originX - oldRect.left) / oldRect.width;
      const oldPercentY = (originY - oldRect.top) / oldRect.height;

      // increment/decrement zoom
      if (event.deltaY < 0) zoomIn();
      if (event.deltaY > 0) zoomOut();

      // get offset between previous image point and origin
      const newRect = img.getBoundingClientRect();
      const offsetX = originX - (newRect.left + newRect.width * oldPercentX);
      const offsetY = originY - (newRect.top + newRect.height * oldPercentY);

      // translate image to keep image point under origin
      translateX += offsetX;
      translateY += offsetY;

      // perform translate
      updateTransform();
    };

    // when container is clicked
    function onContainerClick(event) {
      // if container itself is target of click, and not other
      // element above it
      if (event.target === this) closeLightbox();
    }

    // when mouse button is pressed on image
    const onImageMouseDown = function (event) {
      // store original mouse position relative to image
      clickMouseX = window.mouseX;
      clickMouseY = window.mouseY;
      clickTranslateX = translateX;
      clickTranslateY = translateY;
      event.stopPropagation();
      event.preventDefault();
    };

    // when mouse button is released anywhere in window
    const onWindowMouseUp = function (event) {
      // reset original mouse position
      clickMouseX = undefined;
      clickMouseY = undefined;
      clickTranslateX = undefined;
      clickTranslateY = undefined;

      // remove global listener if lightbox removed from document
      if (!document.body.contains(container))
        window.removeEventListener("mouseup", onWindowMouseUp);
    };

    // when mouse is moved anywhere in window
    const onWindowMouseMove = function (event) {
      if (
        clickMouseX === undefined ||
        clickMouseY === undefined ||
        clickTranslateX === undefined ||
        clickTranslateY === undefined
      )
        return;

      // offset image based on original and current mouse position
      translateX = clickTranslateX + window.mouseX - clickMouseX;
      translateY = clickTranslateY + window.mouseY - clickMouseY;
      updateTransform();
      event.preventDefault();

      // remove global listener if lightbox removed from document
      if (!document.body.contains(container))
        window.removeEventListener("mousemove", onWindowMouseMove);
    };

    // when window is resized
    const onWindowResize = function (event) {
      fit();

      // remove global listener if lightbox removed from document
      if (!document.body.contains(container))
        window.removeEventListener("resize", onWindowResize);
    };

    // attach the necessary event listeners
    img.addEventListener("dblclick", fit);
    img.addEventListener("mousedown", onImageMouseDown);
    container.addEventListener("wheel", onContainerWheel);
    container.addEventListener("mousedown", onContainerClick);
    container.addEventListener("touchstart", onContainerClick);
    window.addEventListener("mouseup", onWindowMouseUp);
    window.addEventListener("mousemove", onWindowMouseMove);
    window.addEventListener("resize", onWindowResize);

    // run fit() after lightbox atttached to document and <img> Loaded
    // so needed container and img dimensions available
    img.addEventListener("load", fit);

    return img;
  }

  // make caption
  function makeCaption(img) {
    const caption = document.createElement("div");
    caption.id = "lightbox_caption";
    const captionSource = img.nextElementSibling;
    if (captionSource.tagName.toLowerCase() === "figcaption") {
      const captionCopy = makeCopy(captionSource);
      caption.innerHTML = captionCopy.innerHTML;
    }

    caption.addEventListener("touchstart", function (event) {
      event.stopPropagation();
    });

    return caption;
  }

  // make carbon copy of html dom element
  function makeCopy(source) {
    const sourceCopy = source.cloneNode(true);

    // delete elements marked with ignore (eg anchor and jump buttons)
    const deleteFromCopy = sourceCopy.querySelectorAll('[data-ignore="true"]');
    for (const element of deleteFromCopy) element.remove();

    // delete certain element attributes
    const attributes = [
      "id",
      "data-collapsed",
      "data-selected",
      "data-highlighted",
      "data-glow",
    ];
    for (const attribute of attributes) {
      sourceCopy.removeAttribute(attribute);
      const elements = sourceCopy.querySelectorAll("[" + attribute + "]");
      for (const element of elements) element.removeAttribute(attribute);
    }

    return sourceCopy;
  }

  // make button to jump to previous image in document
  function makePrevButton(img) {
    const prevButton = document.createElement("button");
    prevButton.id = "lightbox_prev_button";
    prevButton.title = "Jump to the previous image in the document [←]";
    prevButton.classList.add("icon_button", "lightbox_button");
    prevButton.innerHTML = document.querySelector(".icon_caret_left").innerHTML;

    // attach click listeners to button
    prevButton.addEventListener("click", function () {
      getPrevImg(img).click();
    });

    return prevButton;
  }

  // make button to jump to next image in document
  function makeNextButton(img) {
    const nextButton = document.createElement("button");
    nextButton.id = "lightbox_next_button";
    nextButton.title = "Jump to the next image in the document [→]";
    nextButton.classList.add("icon_button", "lightbox_button");
    nextButton.innerHTML = document.querySelector(
      ".icon_caret_right"
    ).innerHTML;

    // attach click listeners to button
    nextButton.addEventListener("click", function () {
      getNextImg(img).click();
    });

    return nextButton;
  }

  // get previous image in document
  function getPrevImg(img) {
    const imgs = document.querySelectorAll(".lightbox_document_img");

    // find index of provided img
    let index;
    for (index = 0; index < imgs.length; index++) {
      if (imgs[index] === img) break;
    }

    // wrap index to other side if < 1
    if (index - 1 >= 0) index--;
    else index = imgs.length - 1;
    return imgs[index];
  }

  // get next image in document
  function getNextImg(img) {
    const imgs = document.querySelectorAll(".lightbox_document_img");

    // find index of provided img
    let index;
    for (index = 0; index < imgs.length; index++) {
      if (imgs[index] === img) break;
    }

    // wrap index to other side if > total
    if (index + 1 <= imgs.length - 1) index++;
    else index = 0;
    return imgs[index];
  }

  // close lightbox
  function closeLightbox() {
    focusBody();

    const lightbox = document.getElementById("lightbox_overlay");
    if (lightbox) lightbox.remove();
  }

  // make all elements behind lightbox non-focusable
  function blurBody(overlay) {
    const all = document.querySelectorAll("*");
    for (const element of all) element.tabIndex = -1;
    document.body.classList.add("body_no_scroll");
  }

  // make all elements focusable again
  function focusBody() {
    const all = document.querySelectorAll("*");
    for (const element of all) element.removeAttribute("tabIndex");
    document.body.classList.remove("body_no_scroll");
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- caret left icon -->

<template class="icon_caret_left">
  <!-- modified from: https://fontawesome.com/icons/caret-left -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"
    ></path>
  </svg>
</template>

<!-- caret right icon -->

<template class="icon_caret_right">
  <!-- modified from: https://fontawesome.com/icons/caret-right -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* regular <img> in document when hovered */
    img.lightbox_document_img:hover {
      cursor: pointer;
    }

    .body_no_scroll {
      overflow: hidden !important;
    }

    /* screen overlay */
    #lightbox_overlay {
      display: flex;
      flex-direction: column;
      position: fixed;
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.75);
      z-index: 3;
    }

    /* middle area containing lightbox image */
    #lightbox_image_container {
      flex-grow: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      position: relative;
      padding: 20px;
    }

    /* bottom area containing caption */
    #lightbox_bottom_container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100px;
      min-height: 100px;
      max-height: 100px;
      background: rgba(0, 0, 0, 0.5);
    }

    /* image number info text box */
    #lightbox_number_info {
      position: absolute;
      color: #ffffff;
      font-weight: 600;
      left: 2px;
      top: 0;
      z-index: 4;
    }

    /* zoom info text box */
    #lightbox_zoom_info {
      position: absolute;
      color: #ffffff;
      font-weight: 600;
      right: 2px;
      top: 0;
      z-index: 4;
    }

    /* copy of image caption */
    #lightbox_caption {
      box-sizing: border-box;
      display: inline-block;
      width: 100%;
      max-height: 100%;
      padding: 10px 0;
      text-align: center;
      overflow-y: auto;
      color: #ffffff;
    }

    /* navigation previous/next button */
    .lightbox_button {
      width: 100px;
      height: 100%;
      min-width: 100px;
      min-height: 100%;
      color: #ffffff;
    }

    /* navigation previous/next button when hovered */
    .lightbox_button:hover {
      background: none !important;
    }

    /* navigation button icon */
    .lightbox_button > svg {
      height: 25px;
    }

    /* figure auto-number */
    #lightbox_caption > span:first-of-type {
      font-weight: bold;
      margin-right: 5px;
    }

    /* lightbox image when hovered */
    #lightbox_img:hover {
      cursor: grab;
    }

    /* lightbox image when grabbed */
    #lightbox_img:active {
      cursor: grabbing;
    }
  }

  /* when on screen < 480px wide */
  @media only screen and (max-width: 480px) {
    /* make navigation buttons skinnier on small screens to make more room for caption text */
    .lightbox_button {
      width: 50px;
      min-width: 50px;
    }
  }

  /* always hide lightbox on print */
  @media only print {
    #lightbox_overlay {
      display: none;
    }
  }
</style>
<!-- 
  Link Highlight Plugin

  Makes it such that when a user hovers or focuses a link, other links that have
  the same target will be highlighted. It also makes it such that when clicking
  a link, the target of the link (eg reference, figure, table) is briefly
  highlighted.
-->

<script type="module">
  // whether to also highlight links that go to external urls
  const externalLinks = "false";
  // whether user must click off to unhighlight instead of just
  // un-hovering
  const clickUnhighlight = "false";
  // whether to also highlight links that are unique
  const highlightUnique = "true";

  // start script
  function start() {
    const links = getLinks();
    for (const link of links) {
      // attach mouse and focus listeners to link
      link.addEventListener("mouseenter", onLinkFocus);
      link.addEventListener("focus", onLinkFocus);
      link.addEventListener("mouseleave", onLinkUnhover);
    }

    // attach click and hash change listeners to window
    window.addEventListener("click", onClick);
    window.addEventListener("touchstart", onClick);
    window.addEventListener("hashchange", onHashChange);

    // run hash change on window load in case user has navigated
    // directly to hash
    onHashChange();
  }

  // when link is focused (tabbed to) or hovered
  function onLinkFocus() {
    highlight(this);
  }

  // when link is unhovered
  function onLinkUnhover() {
    if (clickUnhighlight !== "true") unhighlightAll();
  }

  // when the mouse is clicked anywhere in window
  function onClick(event) {
    unhighlightAll();
  }

  // when hash (eg manuscript.html#introduction) changes
  function onHashChange() {
    const target = getHashTarget();
    if (target) glowElement(target);
  }

  // start glow sequence on an element
  function glowElement(element) {
    const startGlow = function () {
      onGlowEnd();
      element.dataset.glow = "true";
      element.addEventListener("animationend", onGlowEnd);
    };
    const onGlowEnd = function () {
      element.removeAttribute("data-glow");
      element.removeEventListener("animationend", onGlowEnd);
    };
    startGlow();
  }

  // highlight link and all others with same target
  function highlight(link) {
    // force unhighlight all to start fresh
    unhighlightAll();

    // get links with same target
    if (!link) return;
    const sameLinks = getSameLinks(link);

    // if link unique and option is off, exit and don't highlight
    if (sameLinks.length <= 1 && highlightUnique !== "true") return;

    // highlight all same links, and "select" (special highlight) this
    // one
    for (const sameLink of sameLinks) {
      if (sameLink === link) sameLink.setAttribute("data-selected", "true");
      else sameLink.setAttribute("data-highlighted", "true");
    }
  }

  // unhighlight all links
  function unhighlightAll() {
    const links = getLinks();
    for (const link of links) {
      link.setAttribute("data-selected", "false");
      link.setAttribute("data-highlighted", "false");
    }
  }

  // get links with same target
  function getSameLinks(link) {
    const results = [];
    const links = getLinks();
    for (const otherLink of links) {
      if (otherLink.getAttribute("href") === link.getAttribute("href"))
        results.push(otherLink);
    }
    return results;
  }

  // get all links of types we wish to handle
  function getLinks() {
    let query = "a";
    if (externalLinks !== "true") query += '[href^="#"]';
    // exclude buttons, anchor links, toc links, etc
    query += ":not(.button):not(.icon_button):not(.anchor):not(.toc_link)";
    return document.querySelectorAll(query);
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<style>
  @media only screen {
    /* anything with data-highlighted attribute true */
    [data-highlighted="true"] {
      background: #ffeb3b;
    }

    /* anything with data-selected attribute true */
    [data-selected="true"] {
      background: #ff8a65 !important;
    }

    /* animation definition for glow */
    @keyframes highlight_glow {
      0% {
        background: none;
      }
      10% {
        background: #bbdefb;
      }
      100% {
        background: none;
      }
    }

    /* anything with data-glow attribute true */
    [data-glow="true"] {
      animation: highlight_glow 2s;
    }
  }
</style>
<!--
  Table of Contents Plugin

  Provides a "table of contents" (toc) panel on the side of the document that
  allows the user to conveniently navigate between sections of the document.
-->

<script type="module">
  // which types of elements to add links for, in "document.querySelector" format
  const typesQuery = "h1, h2, h3";
  // whether toc starts open. use 'true' or 'false', or 'auto' to
  // use 'true' behavior when screen wide enough and 'false' when not
  const startOpen = "false";
  // whether toc closes when clicking on toc link. use 'true' or
  // 'false', or 'auto' to use 'false' behavior when screen wide
  // enough and 'true' when not
  const clickClose = "auto";
  // if list item is more than this many characters, text will be
  // truncated
  const charLimit = "50";
  // whether or not to show bullets next to each toc item
  const bullets = "false";

  // start script
  function start() {
    // make toc panel and populate with entries (links to document
    // sections)
    const panel = makePanel();
    if (!panel) return;
    makeEntries(panel);
    // attach panel to document after making entries, so 'toc' heading
    // in panel isn't included in toc
    document.body.insertBefore(panel, document.body.firstChild);

    // initial panel state
    if (startOpen === "true" || (startOpen === "auto" && !isSmallScreen()))
      openPanel();
    else closePanel();

    // attach click, scroll, and hash change listeners to window
    window.addEventListener("click", onClick);
    window.addEventListener("scroll", onScroll);
    window.addEventListener("hashchange", onScroll);
    window.addEventListener("keyup", onKeyUp);
    onScroll();

    // add class to push document body down out of way of toc button
    document.body.classList.add("toc_body_nudge");
  }

  // determine if screen wide enough to fit toc panel
  function isSmallScreen() {
    // in default theme:
    // 816px = 8.5in = width of "page" (<body>) element
    // 260px = min width of toc panel (*2 for both sides of <body>)
    return window.innerWidth < 816 + 260 * 2;
  }

  // when mouse is clicked anywhere in window
  function onClick() {
    if (isSmallScreen()) closePanel();
  }

  // when window is scrolled or hash changed
  function onScroll() {
    highlightViewed();
  }

  // when key pressed
  function onKeyUp(event) {
    if (!event || !event.key) return;

    // close on esc
    if (event.key === "Escape") closePanel();
  }

  // find entry of currently viewed document section in toc and highlight
  function highlightViewed() {
    const firstId = getFirstInView(typesQuery);

    // get toc entries (links), unhighlight all, then highlight viewed
    const list = document.getElementById("toc_list");
    if (!firstId || !list) return;
    const links = list.querySelectorAll("a");
    for (const link of links) link.dataset.viewing = "false";
    const link = list.querySelector('a[href="#' + firstId + '"]');
    if (!link) return;
    link.dataset.viewing = "true";
  }

  // get first or previous toc listed element in top half of view
  function getFirstInView(query) {
    // get all elements matching query and with id
    const elements = document.querySelectorAll(query);
    const elementsWithIds = [];
    for (const element of elements) {
      if (element.id) elementsWithIds.push(element);
    }

    // get first or previous element in top half of view
    for (let i = 0; i < elementsWithIds.length; i++) {
      const element = elementsWithIds[i];
      const prevElement = elementsWithIds[Math.max(0, i - 1)];
      if (element.getBoundingClientRect().top >= 0) {
        if (element.getBoundingClientRect().top < window.innerHeight / 2)
          return element.id;
        else return prevElement.id;
      }
    }
  }

  // make panel
  function makePanel() {
    // create panel
    const panel = document.createElement("div");
    panel.id = "toc_panel";
    if (bullets === "true") panel.dataset.bullets = "true";

    // create header
    const header = document.createElement("div");
    header.id = "toc_header";

    // create toc button
    const button = document.createElement("button");
    button.id = "toc_button";
    button.innerHTML = document.querySelector(".icon_th_list").innerHTML;
    button.title = "Table of Contents";
    button.classList.add("icon_button");

    // create header text
    const text = document.createElement("h4");
    text.innerHTML = "Table of Contents";

    // create container for toc list
    const list = document.createElement("div");
    list.id = "toc_list";

    // attach click listeners
    panel.addEventListener("click", onPanelClick);
    header.addEventListener("click", onHeaderClick);
    button.addEventListener("click", onButtonClick);

    // attach elements
    header.appendChild(button);
    header.appendChild(text);
    panel.appendChild(header);
    panel.appendChild(list);

    return panel;
  }

  // create toc entries (links) to each element of the specified types
  function makeEntries(panel) {
    const elements = document.querySelectorAll(typesQuery);
    for (const element of elements) {
      // do not add link if element doesn't have assigned id
      if (!element.id) continue;

      // create link/list item
      const link = document.createElement("a");
      link.classList.add("toc_link");
      switch (element.tagName.toLowerCase()) {
        case "h1":
          link.dataset.level = "1";
          break;
        case "h2":
          link.dataset.level = "2";
          break;
        case "h3":
          link.dataset.level = "3";
          break;
        case "h4":
          link.dataset.level = "4";
          break;
      }
      link.title = element.innerText;
      let text = element.innerText;
      if (text.length > charLimit) text = text.slice(0, charLimit) + "...";
      link.innerHTML = text;
      link.href = "#" + element.id;
      link.addEventListener("click", onLinkClick);

      // attach link
      panel.querySelector("#toc_list").appendChild(link);
    }
  }

  // when panel is clicked
  function onPanelClick(event) {
    // stop click from propagating to window/document and closing panel
    event.stopPropagation();
  }

  // when header itself is clicked
  function onHeaderClick(event) {
    togglePanel();
  }

  // when button is clicked
  function onButtonClick(event) {
    togglePanel();
    // stop header underneath button from also being clicked
    event.stopPropagation();
  }

  // when link is clicked
  function onLinkClick(event) {
    if (clickClose === "true" || (clickClose === "auto" && isSmallScreen()))
      closePanel();
    else openPanel();
  }

  // open panel if closed, close if opened
  function togglePanel() {
    const panel = document.getElementById("toc_panel");
    if (!panel) return;

    if (panel.dataset.open === "true") closePanel();
    else openPanel();
  }

  // open panel
  function openPanel() {
    const panel = document.getElementById("toc_panel");
    if (panel) panel.dataset.open = "true";
  }

  // close panel
  function closePanel() {
    const panel = document.getElementById("toc_panel");
    if (panel) panel.dataset.open = "false";
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- th list icon -->

<template class="icon_th_list">
  <!-- modified from: https://fontawesome.com/icons/th-list -->
  <svg width="16" height="16" viewBox="0 0 512 512" tabindex="-1">
    <path
      fill="currentColor"
      d="M96 96c0 26.51-21.49 48-48 48S0 122.51 0 96s21.49-48 48-48 48 21.49 48 48zM48 208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm0 160c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm96-236h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"
      tabindex="-1"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* toc panel */
    #toc_panel {
      box-sizing: border-box;
      position: fixed;
      top: 0;
      left: 0;
      background: #ffffff;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      z-index: 2;
    }

    /* toc panel when closed */
    #toc_panel[data-open="false"] {
      min-width: 60px;
      width: 60px;
      height: 60px;
      border-right: solid 1px #bdbdbd;
      border-bottom: solid 1px #bdbdbd;
    }

    /* toc panel when open */
    #toc_panel[data-open="true"] {
      min-width: 260px;
      max-width: 480px;
      /* keep panel edge consistent distance away from "page" edge */
      width: calc(((100vw - 8.5in) / 2) - 30px - 40px);
      bottom: 0;
      border-right: solid 1px #bdbdbd;
    }

    /* toc panel header */
    #toc_header {
      box-sizing: border-box;
      display: flex;
      flex-direction: row;
      align-items: center;
      height: 60px;
      margin: 0;
      padding: 20px;
    }

    /* toc panel header when hovered */
    #toc_header:hover {
      cursor: pointer;
    }

    /* toc panel header when panel open */
    #toc_panel[data-open="true"] > #toc_header {
      border-bottom: solid 1px #bdbdbd;
    }

    /* toc open/close header button */
    #toc_button {
      margin-right: 20px;
    }

    /* hide toc list and header text when closed */
    #toc_panel[data-open="false"] > #toc_header > *:not(#toc_button),
    #toc_panel[data-open="false"] > #toc_list {
      display: none;
    }

    /* toc list of entries */
    #toc_list {
      box-sizing: border-box;
      width: 100%;
      padding: 20px;
      position: absolute;
      top: calc(60px + 1px);
      bottom: 0;
      overflow: auto;
    }

    /* toc entry, link to section in document */
    .toc_link {
      display: block;
      padding: 5px;
      position: relative;
      font-weight: 600;
      text-decoration: none;
    }

    /* toc entry when hovered or when "viewed" */
    .toc_link:hover,
    .toc_link[data-viewing="true"] {
      background: #f5f5f5;
    }

    /* toc entry, level 1 indentation */
    .toc_link[data-level="1"] {
      margin-left: 0;
    }

    /* toc entry, level 2 indentation */
    .toc_link[data-level="2"] {
      margin-left: 20px;
    }

    /* toc entry, level 3 indentation */
    .toc_link[data-level="3"] {
      margin-left: 40px;
    }

    /* toc entry, level 4 indentation */
    .toc_link[data-level="4"] {
      margin-left: 60px;
    }

    /* toc entry bullets */
    #toc_panel[data-bullets="true"] .toc_link[data-level]:before {
      position: absolute;
      left: -15px;
      top: -1px;
      font-size: 1.5em;
    }

    /* toc entry, level 2 bullet */
    #toc_panel[data-bullets="true"] .toc_link[data-level="2"]:before {
      content: "\2022";
    }

    /* toc entry, level 3 bullet */
    #toc_panel[data-bullets="true"] .toc_link[data-level="3"]:before {
      content: "\25AB";
    }

    /* toc entry, level 4 bullet */
    #toc_panel[data-bullets="true"] .toc_link[data-level="4"]:before {
      content: "-";
    }
  }

  /* when on screen < 8.5in wide */
  @media only screen and (max-width: 8.5in) {
    /* push <body> ("page") element down to make room for toc icon */
    .toc_body_nudge {
      padding-top: 60px;
    }

    /* toc icon when panel closed and not hovered */
    #toc_panel[data-open="false"]:not(:hover) {
      background: rgba(255, 255, 255, 0.75);
    }
  }

  /* always hide toc panel on print */
  @media only print {
    #toc_panel {
      display: none;
    }
  }
</style>
<!-- 
  Tooltips Plugin

  Makes it such that when the user hovers or focuses a link to a citation or
  figure, a tooltip appears with a preview of the reference content, along with
  arrows to navigate between instances of the same reference in the document.
-->

<script type="module">
  // whether user must click off to close tooltip instead of just un-hovering
  const clickClose = "false";
  // delay (in ms) between opening and closing tooltip
  const delay = "100";

  // start script
  function start() {
    const links = getLinks();
    for (const link of links) {
      // attach hover and focus listeners to link
      link.addEventListener("mouseover", onLinkHover);
      link.addEventListener("mouseleave", onLinkUnhover);
      link.addEventListener("focus", onLinkFocus);
      link.addEventListener("touchend", onLinkTouch);
    }

    // attach mouse, key, and resize listeners to window
    window.addEventListener("mousedown", onClick);
    window.addEventListener("touchstart", onClick);
    window.addEventListener("keyup", onKeyUp);
    window.addEventListener("resize", onResize);
  }

  // when link is hovered
  function onLinkHover() {
    // function to open tooltip
    const delayOpenTooltip = function () {
      openTooltip(this);
    }.bind(this);

    // run open function after delay
    this.openTooltipTimer = window.setTimeout(delayOpenTooltip, delay);
  }

  // when mouse leaves link
  function onLinkUnhover() {
    // cancel opening tooltip
    window.clearTimeout(this.openTooltipTimer);

    // don't close on unhover if option specifies
    if (clickClose === "true") return;

    // function to close tooltip
    const delayCloseTooltip = function () {
      // if tooltip open and if mouse isn't over tooltip, close
      const tooltip = document.getElementById("tooltip");
      if (tooltip && !tooltip.matches(":hover")) closeTooltip();
    };

    // run close function after delay
    this.closeTooltipTimer = window.setTimeout(delayCloseTooltip, delay);
  }

  // when link is focused (tabbed to)
  function onLinkFocus(event) {
    openTooltip(this);
  }

  // when link is touched on touch screen
  function onLinkTouch(event) {
    // attempt to force hover state on first tap always, and trigger
    // regular link click (and navigation) on second tap
    if (event.target === document.activeElement) event.target.click();
    else {
      document.activeElement.blur();
      event.target.focus();
    }
    if (event.cancelable) event.preventDefault();
    event.stopPropagation();
    return false;
  }

  // when mouse is clicked anywhere in window
  function onClick(event) {
    closeTooltip();
  }

  // when key pressed
  function onKeyUp(event) {
    if (!event || !event.key) return;

    switch (event.key) {
      // trigger click of prev button
      case "ArrowLeft":
        const prevButton = document.getElementById("tooltip_prev_button");
        if (prevButton) prevButton.click();
        break;
      // trigger click of next button
      case "ArrowRight":
        const nextButton = document.getElementById("tooltip_next_button");
        if (nextButton) nextButton.click();
        break;
      // close on esc
      case "Escape":
        closeTooltip();
        break;
    }
  }

  // when window is resized or zoomed
  function onResize() {
    closeTooltip();
  }

  // get all links of types we wish to handle
  function getLinks() {
    const queries = [];
    // exclude buttons, anchor links, toc links, etc
    const exclude =
      ":not(.button):not(.icon_button):not(.anchor):not(.toc_link)";
    queries.push('a[href^="#ref-"]' + exclude); // citation links
    queries.push('a[href^="#fig:"]' + exclude); // figure links
    const query = queries.join(", ");
    return document.querySelectorAll(query);
  }

  // get links with same target, get index of link in set, get total
  // same links
  function getSameLinks(link) {
    const sameLinks = [];
    const links = getLinks();
    for (const otherLink of links) {
      if (otherLink.getAttribute("href") === link.getAttribute("href"))
        sameLinks.push(otherLink);
    }

    return {
      elements: sameLinks,
      index: sameLinks.indexOf(link),
      total: sameLinks.length,
    };
  }

  // open tooltip
  function openTooltip(link) {
    // delete tooltip if it exists, start fresh
    closeTooltip();

    // make tooltip element
    const tooltip = makeTooltip(link);

    // if source couldn't be found and tooltip not made, exit
    if (!tooltip) return;

    // make navbar elements
    const navBar = makeNavBar(link);
    if (navBar) tooltip.firstElementChild.appendChild(navBar);

    // attach tooltip to page
    document.body.appendChild(tooltip);

    // position tooltip
    const position = function () {
      positionTooltip(link);
    };
    position();

    // if tooltip contains images, position again after they've loaded
    const imgs = tooltip.querySelectorAll("img");
    for (const img of imgs) img.addEventListener("load", position);
  }

  // close (delete) tooltip
  function closeTooltip() {
    const tooltip = document.getElementById("tooltip");
    if (tooltip) tooltip.remove();
  }

  // make tooltip
  function makeTooltip(link) {
    // get target element that link points to
    const source = getSource(link);

    // if source can't be found, exit
    if (!source) return;

    // create new tooltip
    const tooltip = document.createElement("div");
    tooltip.id = "tooltip";
    const tooltipContent = document.createElement("div");
    tooltipContent.id = "tooltip_content";
    tooltip.appendChild(tooltipContent);

    // make copy of source node and put in tooltip
    const sourceCopy = makeCopy(source);
    tooltipContent.appendChild(sourceCopy);

    // attach mouse event listeners
    tooltip.addEventListener("click", onTooltipClick);
    tooltip.addEventListener("mousedown", onTooltipClick);
    tooltip.addEventListener("touchstart", onTooltipClick);
    tooltip.addEventListener("mouseleave", onTooltipUnhover);

    // (for interaction with lightbox plugin)
    // transfer click on tooltip copied img to original img
    const sourceImg = source.querySelector("img");
    const sourceCopyImg = sourceCopy.querySelector("img");
    if (sourceImg && sourceCopyImg) {
      const clickImg = function () {
        sourceImg.click();
        closeTooltip();
      };
      sourceCopyImg.addEventListener("click", clickImg);
    }

    return tooltip;
  }

  // make carbon copy of html dom element
  function makeCopy(source) {
    const sourceCopy = source.cloneNode(true);

    // delete elements marked with ignore (eg anchor and jump buttons)
    const deleteFromCopy = sourceCopy.querySelectorAll('[data-ignore="true"]');
    for (const element of deleteFromCopy) element.remove();

    // delete certain element attributes
    const attributes = [
      "id",
      "data-collapsed",
      "data-selected",
      "data-highlighted",
      "data-glow",
      "class",
    ];
    for (const attribute of attributes) {
      sourceCopy.removeAttribute(attribute);
      const elements = sourceCopy.querySelectorAll("[" + attribute + "]");
      for (const element of elements) element.removeAttribute(attribute);
    }

    return sourceCopy;
  }

  // when tooltip is clicked
  function onTooltipClick(event) {
    // when user clicks on tooltip, stop click from transferring
    // outside of tooltip (eg, click off to close tooltip, or eg click
    // off to unhighlight same refs)
    event.stopPropagation();
  }

  // when tooltip is unhovered
  function onTooltipUnhover(event) {
    if (clickClose === "true") return;

    // make sure new mouse/touch/focus no longer over tooltip or any
    // element within it
    const tooltip = document.getElementById("tooltip");
    if (!tooltip) return;
    if (this.contains(event.relatedTarget)) return;

    closeTooltip();
  }

  // make nav bar to go betwen prev/next instances of same reference
  function makeNavBar(link) {
    // find other links to the same source
    const sameLinks = getSameLinks(link);

    // don't show nav bar when singular reference
    if (sameLinks.total <= 1) return;

    // find prev/next links with same target
    const prevLink = getPrevLink(link, sameLinks);
    const nextLink = getNextLink(link, sameLinks);

    // create nav bar
    const navBar = document.createElement("div");
    navBar.id = "tooltip_nav_bar";
    const text = sameLinks.index + 1 + " of " + sameLinks.total;

    // create nav bar prev/next buttons
    const prevButton = document.createElement("button");
    const nextButton = document.createElement("button");
    prevButton.id = "tooltip_prev_button";
    nextButton.id = "tooltip_next_button";
    prevButton.title =
      "Jump to the previous occurence of this item in the document [←]";
    nextButton.title =
      "Jump to the next occurence of this item in the document [→]";
    prevButton.classList.add("icon_button");
    nextButton.classList.add("icon_button");
    prevButton.innerHTML = document.querySelector(".icon_caret_left").innerHTML;
    nextButton.innerHTML =
      document.querySelector(".icon_caret_right").innerHTML;
    navBar.appendChild(prevButton);
    navBar.appendChild(document.createTextNode(text));
    navBar.appendChild(nextButton);

    // attach click listeners to buttons
    prevButton.addEventListener("click", function () {
      onPrevNextClick(link, prevLink);
    });
    nextButton.addEventListener("click", function () {
      onPrevNextClick(link, nextLink);
    });

    return navBar;
  }

  // get previous link with same target
  function getPrevLink(link, sameLinks) {
    if (!sameLinks) sameLinks = getSameLinks(link);
    // wrap index to other side if < 1
    let index;
    if (sameLinks.index - 1 >= 0) index = sameLinks.index - 1;
    else index = sameLinks.total - 1;
    return sameLinks.elements[index];
  }

  // get next link with same target
  function getNextLink(link, sameLinks) {
    if (!sameLinks) sameLinks = getSameLinks(link);
    // wrap index to other side if > total
    let index;
    if (sameLinks.index + 1 <= sameLinks.total - 1) index = sameLinks.index + 1;
    else index = 0;
    return sameLinks.elements[index];
  }

  // get element that is target of link or url hash
  function getSource(link) {
    const hash = link ? link.hash : window.location.hash;
    const id = hash.slice(1);
    let target = document.querySelector('[id="' + id + '"]');
    if (!target) return;

    // if ref or figure, modify target to get expected element
    if (id.indexOf("ref-") === 0) target = target.querySelector(":nth-child(2)");
    else if (id.indexOf("fig:") === 0) target = target.querySelector("figure");

    return target;
  }

  // when prev/next arrow button is clicked
  function onPrevNextClick(link, prevNextLink) {
    if (link && prevNextLink)
      goToElement(prevNextLink, window.innerHeight * 0.5);
  }

  // scroll to and focus element
  function goToElement(element, offset) {
    // expand accordion section if collapsed
    expandElement(element);
    const y =
      getRectInView(element).top -
      getRectInView(document.documentElement).top -
      (offset || 0);
    // trigger any function listening for "onscroll" event
    window.dispatchEvent(new Event("scroll"));
    window.scrollTo(0, y);
    document.activeElement.blur();
    element.focus();
  }

  // determine position to place tooltip based on link position in
  // viewport and tooltip size
  function positionTooltip(link, left, top) {
    const tooltipElement = document.getElementById("tooltip");
    if (!tooltipElement) return;

    // get convenient vars for position/dimensions of
    // link/tooltip/page/view
    link = getRectInPage(link);
    const tooltip = getRectInPage(tooltipElement);
    const view = getRectInPage();

    // horizontal positioning
    if (left)
      // use explicit value
      left = left;
    else if (link.left + tooltip.width < view.right)
      // fit tooltip to right of link
      left = link.left;
    else if (link.right - tooltip.width > view.left)
      // fit tooltip to left of link
      left = link.right - tooltip.width;
    // center tooltip in view
    else left = (view.right - view.left) / 2 - tooltip.width / 2;

    // vertical positioning
    if (top)
      // use explicit value
      top = top;
    else if (link.top - tooltip.height > view.top)
      // fit tooltip above link
      top = link.top - tooltip.height;
    else if (link.bottom + tooltip.height < view.bottom)
      // fit tooltip below link
      top = link.bottom;
    else {
      // center tooltip in view
      top = view.top + view.height / 2 - tooltip.height / 2;
      // nudge off of link to left/right if possible
      if (link.right + tooltip.width < view.right) left = link.right;
      else if (link.left - tooltip.width > view.left)
        left = link.left - tooltip.width;
    }

    tooltipElement.style.left = left + "px";
    tooltipElement.style.top = top + "px";
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- caret left icon -->

<template class="icon_caret_left">
  <!-- modified from: https://fontawesome.com/icons/caret-left -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"
    ></path>
  </svg>
</template>

<!-- caret right icon -->

<template class="icon_caret_right">
  <!-- modified from: https://fontawesome.com/icons/caret-right -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* tooltip container */
    #tooltip {
      position: absolute;
      width: 50%;
      min-width: 240px;
      max-width: 75%;
      z-index: 1;
    }

    /* tooltip content */
    #tooltip_content {
      margin-bottom: 5px;
      padding: 20px;
      border-radius: 5px;
      border: solid 1px #bdbdbd;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      background: #ffffff;
      overflow-wrap: break-word;
    }

    /* tooltip copy of paragraphs and figures */
    #tooltip_content > p,
    #tooltip_content > figure {
      margin: 0;
      max-height: 320px;
      overflow-y: auto;
    }

    /* tooltip copy of <img> */
    #tooltip_content > figure > img,
    #tooltip_content > figure > svg {
      max-height: 260px;
    }

    /* navigation bar */
    #tooltip_nav_bar {
      margin-top: 10px;
      text-align: center;
    }

    /* navigation bar previous/next buton */
    #tooltip_nav_bar > .icon_button {
      position: relative;
      top: 3px;
    }

    /* navigation bar previous button */
    #tooltip_nav_bar > .icon_button:first-of-type {
      margin-right: 5px;
    }

    /* navigation bar next button */
    #tooltip_nav_bar > .icon_button:last-of-type {
      margin-left: 5px;
    }
  }

  /* always hide tooltip on print */
  @media only print {
    #tooltip {
      display: none;
    }
  }
</style>
<!--
  Analytics Plugin (third-party) 
  
  Copy and paste code from Google Analytics or similar service here.
-->
<!-- 
  Annotations Plugin

  Allows public annotation of the  manuscript. See https://web.hypothes.is/.
-->

<script>
  // configuration
  window.hypothesisConfig = function () {
    return {
      branding: {
        accentColor: "#2196f3",
        appBackgroundColor: "#f8f8f8",
        ctaBackgroundColor: "#f8f8f8",
        ctaTextColor: "#000000",
        selectionFontFamily: "Open Sans, Helvetica, sans serif",
        annotationFontFamily: "Open Sans, Helvetica, sans serif",
      },
    };
  };

  // hypothesis client script
  const embed = "https://hypothes.is/embed.js";
  // hypothesis annotation count query url
  const query = "https://api.hypothes.is/api/search?limit=0&url=";

  // start script
  function start() {
    const button = makeButton();
    document.body.insertBefore(button, document.body.firstChild);
    insertCount(button);
  }

  // make button
  function makeButton() {
    // create button
    const button = document.createElement("button");
    button.id = "hypothesis_button";
    button.innerHTML = document.querySelector(".icon_hypothesis").innerHTML;
    button.title = "Hypothesis annotations";
    button.classList.add("icon_button");

    function onClick(event) {
      onButtonClick(event, button);
    }

    // attach click listeners
    button.addEventListener("click", onClick);

    return button;
  }

  // insert annotations count
  async function insertCount(button) {
    // get annotation count from Hypothesis based on url
    let count = "-";
    try {
      const canonical = document.querySelector('link[rel="canonical"]');
      const location = window.location;
      const url = encodeURIComponent((canonical || location).href);
      const response = await fetch(query + url);
      const json = await response.json();
      count = json.total || "-";
    } catch (error) {
      console.log(error);
    }

    // put count into button
    const counter = document.createElement("span");
    counter.id = "hypothesis_count";
    counter.innerHTML = count;
    button.title = "View " + count + " Hypothesis annotations";
    button.append(counter);
  }

  // when button is clicked
  function onButtonClick(event, button) {
    const script = document.createElement("script");
    script.src = embed;
    document.body.append(script);
    button.remove();
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- hypothesis icon -->

<template class="icon_hypothesis">
  <!-- modified from: https://simpleicons.org/icons/hypothesis.svg / https://git.io/Jf1VB -->
  <svg width="16" height="16" viewBox="0 0 24 24" tabindex="-1">
    <path
      fill="currentColor"
      d="M3.43 0C2.5 0 1.72 .768 1.72 1.72V18.86C1.72 19.8 2.5 20.57 3.43 20.57H9.38L12 24L14.62 20.57H20.57C21.5 20.57 22.29 19.8 22.29 18.86V1.72C22.29 .77 21.5 0 20.57 0H3.43M5.14 3.43H7.72V9.43S8.58 7.72 10.28 7.72C12 7.72 13.74 8.57 13.74 11.24V17.14H11.16V12C11.16 10.61 10.28 10.07 9.43 10.29C8.57 10.5 7.72 11.41 7.72 13.29V17.14H5.14V3.43M18 13.72C18.95 13.72 19.72 14.5 19.72 15.42A1.71 1.71 0 0 1 18 17.13A1.71 1.71 0 0 1 16.29 15.42C16.29 14.5 17.05 13.71 18 13.71Z"
      tabindex="-1"
    ></path>
  </svg>
</template>

<style>
  /* hypothesis activation button */
  #hypothesis_button {
    box-sizing: border-box;
    position: fixed;
    top: 0;
    right: 0;
    width: 60px;
    height: 60px;
    background: #ffffff;
    border-radius: 0;
    border-left: solid 1px #bdbdbd;
    border-bottom: solid 1px #bdbdbd;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
    z-index: 2;
  }

  /* hypothesis button svg */
  #hypothesis_button > svg {
    position: relative;
    top: -4px;
  }

  /* hypothesis annotation count */
  #hypothesis_count {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 5px;
  }

  /* side panel */
  .annotator-frame {
    width: 280px !important;
  }

  /* match highlight color to rest of theme */
  .annotator-highlights-always-on .annotator-hl {
    background-color: #ffeb3b !important;
  }

  /* match focused color to rest of theme */
  .annotator-hl.annotator-hl-focused {
    background-color: #ff8a65 !important;
  }

  /* match bucket bar color to rest of theme */
  .annotator-bucket-bar {
    background: #f5f5f5 !important;
  }

  /* always hide button, toolbar, and tooltip on print */
  @media only print {
    #hypothesis_button {
      display: none;
    }

    .annotator-frame {
      display: none !important;
    }

    hypothesis-adder {
      display: none !important;
    }
  }
</style>
<!-- 
  Mathjax Plugin (third-party) 

  Allows the proper rendering of math/equations written in LaTeX.
  See https://www.mathjax.org/.
-->

<script type="text/x-mathjax-config">
  // configuration
  MathJax.Hub.Config({
    "CommonHTML": { linebreaks: { automatic: true } },
    "HTML-CSS": { linebreaks: { automatic: true } },
    "SVG": { linebreaks: { automatic: true } },
    "fast-preview": { disabled: true }
  });
</script>

<script
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"
  integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A=="
  crossorigin="anonymous"
></script>

<style>
  /* mathjax containers */
  .math.display > span:not(.MathJax_Preview) {
    /* turn inline element (no dimensions) into block (allows fixed width and thus scrolling) */
    display: flex !important;
    overflow-x: auto !important;
    overflow-y: hidden !important;
    justify-content: center;
    align-items: center;
    margin: 0 !important;
  }

  /* right click menu */
  .MathJax_Menu {
    border-radius: 5px !important;
    border: solid 1px #bdbdbd !important;
    box-shadow: none !important;
  }

  /* equation auto-number */
  span[id^="eq:"] > span.math.display + span {
    font-weight: 600;
  }

  /* equation */
  span[id^="eq:"] > span.math.display > span {
    /* nudge to make room for equation auto-number and anchor */
    margin-right: 60px !important;
  }
</style>
</body>
</html>
